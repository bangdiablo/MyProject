{"remainingRequest":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/src/views/header/account_setting.vue?vue&type=style&index=0&id=38a9db56&scoped=true&lang=css&","dependencies":[{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/src/views/header/account_setting.vue","mtime":1580458518175},{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmxheWVyX3BvcHVwIHsKICAgIGRpc3BsYXk6IGJsb2NrOwp9Ci5tb2RhbF9iZyB7CiAgICBkaXNwbGF5OiBibG9jazsKfQouY29udGVudCBidXR0b24gewogICAgbGluZS1oZWlnaHQ6IDE7CiAgICBwYWRkaW5nOiA1cHggN3B4OwogICAgYm9yZGVyOiAxcHggc29saWQgI0NDRDREQzsKICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgIG1hcmdpbjogLTVweCAycHggLTNweDsKfQo="},{"version":3,"sources":["account_setting.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"account_setting.vue","sourceRoot":"src/views/header","sourcesContent":["<!-- 계정 설정 -->\n\n<template>\n    <article id=\"contents\" class=\"sub\" @keydown.esc=\"closeLayerPopup\">\n\t\t<location/>\n\n\t\t<ul class=\"category_navi\">\n\t\t\t<li><a href=\"#\" :class=\"{active: activeTab == 'general'}\" @click=\"changeActiveTab\" data-active=\"general\">일반</a></li>\n\t\t\t<li><a href=\"#\" :class=\"{active: activeTab == 'security'}\" @click=\"changeActiveTab\" data-active=\"security\">보안</a></li>\n\t\t</ul>\n\t\t<div class=\"content\">\n\n\t\t\t<div v-show=\"activeTab == 'general'\">\n\t\t\t\t<h3>기본사항</h3>\n\t\t\t\t<table class=\"board_view\">\n\t\t\t\t\t<caption>기본사항</caption>\n\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t<col style=\"width:200px\" />\n\t\t\t\t\t\t<col style=\"width:*\" />\n\t\t\t\t\t</colgroup>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th scope=\"row\">이름</th>\n\t\t\t\t\t\t\t<td>{{userName}}<button type=\"button\" class=\"btn_edit\" @click=\"openLayerPopup('nameChangeLayer')\">수정</button></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th scope=\"row\">메일 주소</th>\n\t\t\t\t\t\t\t<td>{{email}} <button type=\"button\" class=\"btn_edit\" @click=\"openLayerPopup('emailChangeLayer')\">수정</button></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t\t<h3 class=\"bottom_line\">데이터 저장 장소</h3>\n\t\t\t\t<p><strong>Asia Pacific(Tokyo)</strong></p>\n\t\t\t\t<p>모든 데이터와 정보는 이 곳에 저장됩니다.</p>\n\t\t\t</div>\n\n\t\t\t<div v-show=\"activeTab == 'security'\">\n\t\t\t\t<h3>비밀번호</h3>\n                <button type=\"button\" class=\"btn_edit\" @click=\"openLayerPopup('passwordLayer')\">수정</button>\n<!--\t\t\t\t<table class=\"board_view\">-->\n<!--\t\t\t\t\t<caption>비밀번호</caption><button type=\"button\" class=\"btn_edit\" @click=\"openLayerPopup('passwordLayer')\">수정</button>-->\n<!--\t\t\t\t\t<colgroup>-->\n<!--\t\t\t\t\t\t<col style=\"width:200px\" />-->\n<!--\t\t\t\t\t\t<col style=\"width:*\" />-->\n<!--\t\t\t\t\t</colgroup>-->\n<!--\t\t\t\t\t<tbody>-->\n<!--\t\t\t\t\t\t<tr>-->\n<!--\t\t\t\t\t\t\t<th scope=\"row\">현재 비밀번호</th>-->\n<!--\t\t\t\t\t\t\t<td>●●●●●●●●● <button type=\"button\" class=\"btn_edit\" @click=\"openLayerPopup('passwordLayer')\">수정</button></td>-->\n<!--\t\t\t\t\t\t</tr>-->\n<!--\t\t\t\t\t</tbody>-->\n<!--\t\t\t\t</table>-->\n\t\t\t\t<h3 class=\"bottom_line\">2단계 인증</h3>\n\t\t\t\t<p><input type=\"checkbox\" style=\"position:relative; top:-2px;\" @change=\"changeSecondCertificationLayer\" ref=\"secondCertificationCheckbox\"/><strong>2단계 인증 사용</strong></p>\n\t\t\t\t<p>로그인할 때마다 비밀번호 외에  6자리 보안 코드가 필요합니다.</p>\n\t\t\t</div>\n\t\t</div>\n\n\n        <!-- 메일 주소 변경 -->\n        <div class=\"layer_popup\" v-show=\"emailChangeLayer.isActive\" ref=\"emailChangeLayer\">\n            <h3>메일 주소 변경</h3>\n            <fieldset class=\"write_form\">\n                <legend>메일 주소 변경</legend>\n                <p>\n\t\t\t<span class=\"category\">\n\t\t\t\t<label for=\"chMailAddress\">메일 주소</label>\n\t\t\t</span>\n                    <span class=\"field\">\n\t\t\t\t<input type=\"text\" placeholder=\"\" :value=\"email\" id=\"chMailAddress\" ref=\"userEmail\" @keydown.enter=\"changeEmail\"/>\n\t\t\t</span>\n                </p>\n            </fieldset>\n\n            <div class=\"btn_set\">\n                <div class=\"right\">\n                    <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayerPopup\">취소</button>\n                    <button type=\"button\" class=\"btn_basic submit\" @click=\"changeEmail\">확인</button>\n                </div>\n            </div>\n            <button class=\"btn_close\" @click=\"closeLayerPopup\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n        </div>\n\n        <!-- 이름 변경 -->\n        <div class=\"layer_popup\" v-show=\"nameChangeLayer.isActive\" ref=\"nameChangeLayer\">\n            <h3>이름 변경</h3>\n            <fieldset class=\"write_form\">\n                <legend>이름 변경</legend>\n                <p>\n\t\t\t<span class=\"category\">\n\t\t\t\t<label for=\"chUserName\">이름</label>\n\t\t\t</span>\n                    <span class=\"field\">\n\t\t\t\t<input type=\"text\" placeholder=\"\" :value=\"userName\" id=\"chUserName\" ref=\"userName\" @keydown.enter=\"changeName\"/>\n\t\t\t</span>\n                </p>\n            </fieldset>\n\n            <div class=\"btn_set\">\n                <div class=\"right\">\n                    <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayerPopup\">취소</button>\n                    <button type=\"button\" class=\"btn_basic submit\" @click=\"changeName\">확인</button>\n                </div>\n            </div>\n            <button class=\"btn_close\" @click=\"closeLayerPopup\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n        </div>\n\n        <!-- 2단계 인증 -->\n        <div class=\"layer_popup\" style=\"display: none;\">\n            <h3>2단계 인증</h3>\n            <div class=\"qrcode_area\">\n                <img src=\"@/assets/images/sub/sample_qrcode.png\" alt=\"\" />\n                <!-- QR코드 - 넓이:92 , 높이:92 -->\n            </div>\n            <fieldset class=\"write_form\">\n                <legend>2단계 인증</legend>\n                <p>\n\t\t\t<span class=\"category\">\n\t\t\t\t<label for=\"confirmCode\">코드</label>\n\t\t\t</span>\n                    <span class=\"field\">\n\t\t\t\t<input type=\"password\" placeholder=\"\" value=\"\" id=\"confirmCode\" />\n\t\t\t</span>\n                </p>\n            </fieldset>\n\n            <div class=\"btn_set\">\n                <div class=\"right\">\n                    <button type=\"button\" class=\"btn_basic cancel\">취소</button>\n                    <button type=\"button\" class=\"btn_basic submit\">확인</button>\n                </div>\n            </div>\n            <button class=\"btn_close\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n        </div>\n\n        <!-- 2단계 인증 설정-->\n        <div class=\"layer_popup\" v-show=\"secondCertificationLayer.isActive\" ref=\"secondCertificationLayer\">\n            <h3>2단계 인증 설정</h3>\n            <div class=\"security_step\">\n                <ul>\n                    <li :class=\"{step01:true, on:isTurn(1)}\"><!-- 다음 단계로 이동 할수록 on 클래스가 추가됨-->\n                        <span><strong>Step1</strong></span>\n                        <p>Installing Google Authenticator</p>\n                    </li>\n                    <li :class=\"{step02:true, on:isTurn(2)}\">\n                        <span><strong>Step2</strong></span>\n                        <p>Synchronisation</p>\n                    </li>\n                    <li :class=\"{step03:true, on:isTurn(3)}\">\n                        <span><strong>Step3</strong></span>\n                        <p>Validation</p>\n                    </li>\n                    <li :class=\"{step04:true, on:isTurn(4)}\">\n                        <span><strong>Step4</strong></span>\n                        <p>Recorvery Codes</p>\n                    </li>\n                </ul>\n            </div>\n            <div class=\"google_area\">\n                <div v-if=\"isCurrentStep(1)\">\n                    <p>Please install Google Authenticator on your mobile.</p>\n                    <p>When the installation is done, click on countinue.</p>\n\n                    <p>Launch your application store and search for</p>\n                    <b>Google Authenticator</b>\n                </div>\n\n                <div v-show=\"isCurrentStep(2)\">\n                    <div>\n                        <img :src=\"qrcodeUrl\"/>\n                    </div>\n                    <b>{{certify}}</b>\n                    <p>를 입력하세요.</p>\n                </div>\n\n                <div v-if=\"isCurrentStep(3)\">\n                    <span class=\"category\">\n                        <label for=\"confirmCode\">코드</label>\n                    </span>\n                    <span class=\"field\">\n                        <input type=\"text\" placeholder=\"\" v-model.number=\"secondCertificationLayer.verificationCode\" />\n                    </span>\n                </div>\n\n                <div v-if=\"isCurrentStep(4)\">\n                    끝\n                </div>\n            </div>\n            <div class=\"btn_set\">\n                <div class=\"right\">\n                    <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayerPopup\" v-if=\"showWhenStepIn(1)\">취소</button>\n                    <button type=\"button\" class=\"btn_basic cancel\" @click=\"prevStep\" v-if=\"showWhenStepIn(2,3)\">이전</button>\n                    <button type=\"button\" class=\"btn_basic submit\" @click=\"nextStep\" v-if=\"showWhenStepIn(1,2,3)\">다음</button>\n                    <button type=\"button\" class=\"btn_basic submit\" @click=\"closeLayerPopup\" v-if=\"showWhenStepIn(4)\">완료</button>\n                </div>\n            </div>\n            <button class=\"btn_close\" @click=\"closeLayerPopup\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n        </div>\n\n        <!-- 비밀번호 변경 -->\n        <div class=\"layer_popup\" v-show=\"passwordLayer.isActive\" ref=\"passwordLayer\">\n            <h3>비밀번호 변경</h3>\n            <fieldset class=\"write_form\">\n                <legend>비밀번호 변경</legend>\n                <p>\n\t\t\t<span class=\"category\">\n\t\t\t\t<label for=\"currentPW\">현재 비밀번호</label>\n\t\t\t</span>\n                    <span class=\"field\">\n\t\t\t\t<input type=\"password\" placeholder=\"\" v-model=\"passwordLayer.currentPW\" ref=\"currentPW\" />\n\t\t\t</span>\n                </p>\n                <p>\n\t\t\t<span class=\"category\">\n\t\t\t\t<label for=\"newPW\">새 비밀번호</label>\n\t\t\t</span>\n                    <span class=\"field\">\n\t\t\t\t<input type=\"password\" placeholder=\"\" v-model=\"passwordLayer.newPW\" ref=\"newPW\" />\n\t\t\t</span>\n                </p>\n                <p>\n\t\t\t<span class=\"category\">\n\t\t\t\t<label for=\"newPWCheck\">새 비밀번호 확인</label>\n\t\t\t</span>\n                    <span class=\"field\">\n\t\t\t\t<input type=\"password\" placeholder=\"\" v-model=\"passwordLayer.newPWCheck\" ref=\"newPWCheck\" />\n\t\t\t</span>\n                </p>\n            </fieldset>\n\n            <div class=\"btn_set\">\n                <div class=\"right\">\n                    <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayerPopup\">취소</button>\n                    <button type=\"button\" class=\"btn_basic submit\" @click=\"changePassword\">확인</button>\n                </div>\n            </div>\n            <button class=\"btn_close\" @click=\"closeLayerPopup\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n        </div>\n\n        <!-- 모달 배경 -->\n        <div class=\"modal_bg\" v-show=\"modal.isActive\"></div>\n\t</article>\n</template>\n\n<script>\n\n    import $ from \"jquery\";\n\n\texport default {\n\t\tdata(){\n\t\t\treturn {\n\t\t\t    id: this.$store.state.header.user.id,\n                qrcodeUrl: '',\n                certify: '',\n                activeTab: 'general',\n                emailChangeLayer: {\n\t\t\t\t    isActive: false\n                },\n                nameChangeLayer: {\n                    isActive: false\n                },\n                passwordLayer: {\n\t\t\t\t    isActive: false,\n                    currentPW: '',\n                    newPW: '',\n                    newPWCheck: ''\n                },\n                secondCertificationLayer: {\n                    isActive: false,\n                    currentStep: 1,\n                    verificationCode: ''\n                },\n                modal: {\n\t\t\t\t    isActive: false\n                },\n                user: {\n\t\t\t        name: ''\n                },\n\t\t\t}\n\t\t},\n        computed: {\n\t\t    userName() {\n\t\t        let userName = this.firstname;\n\n\t\t        if (this.lastname)\n\t\t            userName += ' ' + this.lastname;\n\n\t\t      return userName;\n            },\n            firstname() {\n\n                return this.$store.state.header.user.firstname;\n            },\n            lastname() {\n\n                return this.$store.state.header.user.lastname;\n            },\n            email() {\n\n                return this.$store.state.header.user.email;\n            },\n            isTurn() {\n\n\t\t        return (stepNum) =>{\n\n\t\t            return this.secondCertificationLayer.currentStep >= stepNum;\n                }\n            },\n            isCurrentStep() {\n\n\t\t        return (stepNum) =>{\n\n\t\t            return this.secondCertificationLayer.currentStep === stepNum;\n                }\n            }\n        },\n        watch: {\n\t\t  secondCertificationLayer : {\n\n\t\t      deep: true,\n\n              handler(deep) {\n\n\t\t          let currentStep = deep.currentStep;\n\n\t\t          if (currentStep == 4)\n\t\t              this.$refs.secondCertificationCheckbox.checked = true;\n              }\n          }\n        },\n\t\tmethods : {\n\n\t\t    changeSecondCertificationLayer(event) {\n\n\t\t        let checked = event.target.checked;\n\n\t\t        if (checked) {\n\n\t\t            this.secondCertificationLayer.currentStep = 1;\n\t\t            this.certify = '';\n                    this.qrcodeUrl = '';\n\t\t            this.openLayerPopup('secondCertificationLayer');\n\t\t            event.target.checked = !event.target.checked;\n\n                } else {\n\n                    if(confirm(\"2단계 인증을 취소하시겠습니까?\")) {\n\n                        this.removeCertify(event);\n                        return;\n\n                    } else {\n\n                        event.target.checked = !event.target.checked;\n                    }\n                }\n            },\n\n            // 2단계 인증 해제\n            removeCertify(event) {\n\n\t\t        axios.post('/header/removeCertify/', {userId: this.id}).then(response => {\n\n\t\t            let data = response.data;\n\n\t\t            if (data.code === 1000) {\n\n\t\t                this.$store.dispatch('setUser', {existCertify: false});\n\n                    } else {\n\n\t\t                alert('에러가 발생했습니다.');\n\t\t                event.target.checked = !event.target.checked;\n                    }\n                }).catch(ex => {\n\n                    alert('에러가 발생했습니다.');\n                    event.target.checked = !event.target.checked;\n                    console.log(ex);\n                });\n            },\n\n\t\t    showWhenStepIn() {\n\n\t\t        let currentStep = this.secondCertificationLayer.currentStep,\n                    show = false;\n\n\t\t        for (let i = 0; i < arguments.length; i++) {\n\n\t\t            if (currentStep == arguments[i])\n\t\t                show = true;\n                }\n\n\t\t        return show;\n            },\n\n            // 이전 단계\n            prevStep() {\n\n                if (this.secondCertificationLayer.currentStep > 1)\n                    this.secondCertificationLayer.currentStep -= 1;\n            },\n\n            // 다음 단계\n            nextStep() {\n\n\t\t        let currentStep = this.secondCertificationLayer.currentStep,\n                    verificationCode = this.secondCertificationLayer.verificationCode;\n\n                if (currentStep > 3) return;\n\n                // 1단계에서 2단계로 갈 때 OTP키 확인\n                if (currentStep == 1) {\n\n                    this.getOTPKey();\n                    return false;\n                }\n\n                // 3단계에서 다음으로 넘어갈 때 검증\n                if (currentStep == 3) {\n\n                    if (verificationCode != '')\n                        this.checkVerificationCode();\n\n                    return false;\n                }\n\n                this.secondCertificationLayer.currentStep += 1;\n\n            },\n\n            // OTP Key 조회\n            getOTPKey() {\n\n\t\t        let self = this,\n                    userId = this.id;\n\n\t\t        axios.post('/header/getOTPKey/', {userId: userId}).then(response => {\n\n                    let code = response.data.code,\n                        certify = response.data.certify,\n                        imgResponse = response.data.imgResponse;\n\n                    if (code === 1000) {\n\n                        self.certify = certify;\n                        this.getQrcode();\n                    }\n\n                }).catch(ex => {\n\n                    console.log(ex);\n                })\n            },\n\n            // QR code 조회\n            getQrcode() {\n\n\t\t        let self = this,\n                    userId = this.id,\n                    certify = this.certify;\n\n\t\t        axios.post('/header/getQrcode/', {userId: userId, certify: certify}).then(response => {\n\n\t\t            this.$nextTick(function () {\n\n\t\t                this.qrcodeUrl = response.data.qrcodeUrl;\n\t\t                this.secondCertificationLayer.currentStep += 1;\n                    });\n\n                }).catch(ex => {\n\n                    console.log(ex);\n                });\n            },\n\n            // 검증 코드 체크\n            checkVerificationCode() {\n\n\t\t        let self = this,\n                    userId = this.id,\n                    certify = this.certify,\n                    verificationCode = this.secondCertificationLayer.verificationCode;\n\n\t\t        axios.post(\"/header/checkVerificationCode/\", {\n\t\t            userId: userId,\n                    certify: certify,\n\t\t            verificationCode: verificationCode\n\t\t        }).then(response => {\n\n                    let valid = response.data.valid;\n\n                    if (valid) {\n\n                        self.secondCertificationLayer.currentStep += 1;\n                        this.$store.dispatch('setUser', {existCertify: true});\n\n                    } else {\n\n                        alert('틀림!')\n                    }\n\n                }).catch(ex => {\n\n                    console.log(ex);\n                })\n\n            },\n\n\t\t\tchangeActiveTab (event) {\n\n\t\t\t\tthis.activeTab = event.target.dataset.active;\n\t\t\t},\n            openLayerPopup(layerName) {\n\n                this.modal.isActive = true;\n                this[layerName].isActive = true;\n\n\t\t\t    switch (layerName) {\n\n                    case 'emailChangeLayer':\n                    case 'nameChangeLayer':\n                        this.$nextTick(function () {\n\n                            this.$refs[layerName].getElementsByClassName('field')[0].getElementsByTagName('input')[0].select();\n                        })\n                        break;\n\n                    case 'passwordLayer':\n                        this.passwordLayer.currentPW = '';\n                        this.passwordLayer.newPW = '';\n                        this.passwordLayer.newPWCheck = '';\n                        break;\n                }\n            },\n            closeLayerPopup(event) {\n\n                this.modal.isActive = false;\n\n\t\t\t    if (event.keyCode) {\n\n                    for(let key in this) {\n\n                        if (key.indexOf('Layer') > -1)\n                            this[key].isActive = false;\n                    }\n\n\t\t\t        return;\n                }\n\n                for (let key in this.$refs) {\n\n                    if ($(event.target).closest(\".layer_popup\")[0] === this.$refs[key])\n                        this[key].isActive = false;\n                }\n            },\n            changeName() {\n\n                let userName = this.$refs.userName.value,\n                    userNameArr = userName.split(\" \"),\n                    firstname = '',\n                    lastname = '';\n\n                if (userNameArr.length === 1) {\n\n                    firstname = userNameArr[0];\n\n                } else {\n\n                    lastname = userNameArr.pop();\n                    firstname = userNameArr.join(\" \");\n                }\n\n                let params = {\n                    id : this.id,\n                    firstname : firstname,\n                    lastname: lastname\n                };\n\n                this.updateUserInfo(params);\n            },\n            changeEmail() {\n\n                let email = this.$refs.userEmail.value,\n                    params = {\n                        id : this.id,\n                        email : email\n                    };\n\n                this.updateUserInfo(params);\n            },\n            changePassword() {\n\n\t\t\t    let currentPassword  = this.$refs.currentPW.value,\n                    newPassword      = this.$refs.newPW.value,\n                    newPasswordCheck = this.$refs.newPWCheck.value;\n\n\t\t\t    if (newPassword !== newPasswordCheck) {\n\t\t\t        alert(\"새로운 비밀번호가 일치하지 않습니다.\");\n                    return;\n                }\n\n\t\t\t    let params = {\n\t\t\t        id: this.id,\n                    currentPassword : currentPassword,\n                    newPassword : newPassword,\n                    newPasswordCheck : newPasswordCheck\n                };\n\n                this.updateUserInfo(params);\n            },\n            updateUserInfo(params) {\n\n                let qs = require('qs');\n\n                axios.post('/header/updateUserInfo/', qs.stringify(params))\n                    .then(response => {\n\n                        let data = response.data;\n\n                        if (data.code == 1000) {\n\n                            alert(\"저장했습니다.\");\n                            this.closeLayerPopup({keyCode: true});\n                            this.$store.dispatch('setUser', params);\n\n                        } else {\n\n                            let message =  '';\n\n                            switch (data.code) {\n\n                                // PASSWORD_IS_WRONG\n                                case -2001:\n                                    message = \"비밀번호가 올바르지 않습니다.\";\n                                    break;\n\n                                // NEW_PASSWORD_CHECK_WRONG\n                                case -2012:\n                                    message = \"새로운 비밀번호가 일치하지 않습니다.\";\n                                    break;\n\n                                // INTERNAL_SERVER_ERROR\n                                case -1000:\n                                    message = \"오류가 발생했습니다. 다시 시도해주세요.\";\n                                    break;\n                            }\n\n                            alert(message);\n                        }\n\n                    }).catch(ex => {\n\n                        console.log(ex);\n                    });\n            }\n\t\t},\n        mounted() {\n\n\t\t    let self = this;\n\n\t\t    this.user.name = this.firstname;\n\n\t\t    if (this.lastname)\n\t\t        this.user.name += ' ' +  this.lastname;\n\n\t\t    this.$nextTick(function() {\n\n                this.$refs.secondCertificationCheckbox.checked = this.$store.getters.user.existCertify;\n            });\n        },\n\t}\n</script>\n\n<style scoped>\n.layer_popup {\n    display: block;\n}\n.modal_bg {\n    display: block;\n}\n.content button {\n    line-height: 1;\n    padding: 5px 7px;\n    border: 1px solid #CCD4DC;\n    border-radius: 3px;\n    margin: -5px 2px -3px;\n}\n</style>\n"]}]}