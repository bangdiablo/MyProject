{"remainingRequest":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/src/views/management/user_server/csv_invitation.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/src/views/management/user_server/csv_invitation.vue","mtime":1579141092302},{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7c2F2ZUFzfSBmcm9tICdmaWxlLXNhdmVyJwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogImNzdl9pbnZpdGF0aW9uIiwKICAgIGRhdGEoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgICBzaG93OiB7CiAgICAgICAgICAgICAgbW9kYWw6IGZhbHNlLAogICAgICAgICAgICAgIGZhaWxGaWxlVXBsb2FkTGF5ZXI6IGZhbHNlLAogICAgICAgICAgICAgIHN1Y2Nlc3NGaWxlVXBsb2FkTGF5ZXI6IGZhbHNlCiAgICAgICAgICB9LAogICAgICAgICAgZmlsZXM6IFtdCiAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CgogICAgICAgIC8vIGNzdiDsg5jtlIzrs7TquLAKICAgICAgICBzaG93VGhlU2FtcGxlKCkgewoKICAgICAgICAgICAgLy8gVE9ETyDtjJ3sl4Ug7IOd7ISxCiAgICAgICAgfSwKCiAgICAgICAgLy8gY3N2IOyDmO2UjCDri6TsmrTroZzrk5wKICAgICAgICBkb3dubG9hZFRoZVNhbXBsZSgpIHsKCiAgICAgICAgICAgIHNhdmVBcygnaHR0cDovLzEyNy4wLjAuMTo4MDgwL0FkZE11bHRpcGxlVXNlci5jc3YnLCAnQWRkTXVsdGlwbGVVc2VyLmNzdicpOwogICAgICAgIH0sCgogICAgICAgIC8vIGxheWVyIOuLq+q4sAogICAgICAgIGNsb3NlTGF5ZXIoKSB7CgogICAgICAgICAgICBsZXQgc2hvdyA9IHRoaXMuc2hvdzsKCiAgICAgICAgICAgIGZvciAobGV0IHByb3AgaW4gc2hvdykgewoKICAgICAgICAgICAgICAgIHNob3dbcHJvcF0gPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH0sCgogICAgICAgIGNoZWNrRmlsZXMoZmlsZXMsIGNhbGxiYWNrKSB7CgogICAgICAgICAgICBsZXQgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKSwKICAgICAgICAgICAgICAgIGluZGV4ID0gMCwKICAgICAgICAgICAgICAgIHZhbGlkID0gdHJ1ZSwKICAgICAgICAgICAgICAgIHRoYXQgPSB0aGlzLAogICAgICAgICAgICAgICAgZmlsZSwKICAgICAgICAgICAgICAgIGk7CgogICAgICAgICAgICAvKgogICAgICAgICAgICAgKiDrk5zroa3ri6TsmrQg65CcIO2MjOydvOydtCDsmKzrsJTrpbggQ1NW7YyM7J287J247KeAIOqygOyCrAogICAgICAgICAgICAgKiAxLiBDU1Yg7YyM7J287J247KeAIOqygOyCrAogICAgICAgICAgICAgKiAyLiBDU1Yg64K07JqpIO2YleyLneydtCDrp57ripTsp4Ag6rKA7IKsCiAgICAgICAgICAgICAqLwogICAgICAgICAgICAvLyAxCiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkrKykgewoKICAgICAgICAgICAgICAgIGxldCBmaWxlID0gZmlsZXNbaV07CgogICAgICAgICAgICAgICAgaWYgKGZpbGUubmFtZS5sYXN0SW5kZXhPZigiLiIpID09IC0xIHx8IGZpbGUubmFtZS5zbGljZShmaWxlLm5hbWUubGFzdEluZGV4T2YoIi4iKSArIDEpLnRvTG93ZXJDYXNlKCkgIT09ICdjc3YnKSB7CgogICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvdy5mYWlsRmlsZVVwbG9hZExheWVyID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3cubW9kYWwgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGZpbGVzLmxlbmd0aCA9PSAwKSByZXR1cm47CgogICAgICAgICAgICByZWFkZXIucmVhZEFzQmluYXJ5U3RyaW5nKGZpbGVzW2luZGV4XSk7CgogICAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZSkgewoKICAgICAgICAgICAgICAgIGxldCBkYXRhID0gZS50YXJnZXQucmVzdWx0OwoKICAgICAgICAgICAgICAgIGxldCBkYXRhQXJyID0gZGF0YS5zcGxpdCgiXHJcbiIpOwoKICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZGF0YUFyci5sZW5ndGg7IGorKykgewoKICAgICAgICAgICAgICAgICAgICBpZiAoaiA9PT0gMCkgY29udGludWU7CgogICAgICAgICAgICAgICAgICAgIGxldCBpbXBsRGF0YSA9IGRhdGFBcnJbal07CgogICAgICAgICAgICAgICAgICAgIGlmIChpbXBsRGF0YSA9PT0gJycpIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICBsZXQgaW1wbERhdGFBcnIgPSBpbXBsRGF0YS5zcGxpdCgiLCIpOwoKICAgICAgICAgICAgICAgICAgICBsZXQgZW1haWwgPSBpbXBsRGF0YUFyclsyXTsKICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhlbWFpbCkKICAgICAgICAgICAgICAgICAgICBpZiAoIXZhbGlkRW1haWwoZW1haWwpKSB7CgogICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnNob3cuZmFpbEZpbGVVcGxvYWRMYXllciA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuc2hvdy5tb2RhbCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJlYWRlci5vbmxvYWRlbmQgPSBmdW5jdGlvbiAoZSkgewoKICAgICAgICAgICAgICAgIGlmICh2YWxpZCkgewoKICAgICAgICAgICAgICAgICAgICBpZiAoKytpbmRleCAhPSBmaWxlcy5sZW5ndGgpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNCaW5hcnlTdHJpbmcoZmlsZXNbaW5kZXhdKTsKCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkrKykgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUgPSBmaWxlc1tpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUuaWQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMCkgKyAiXyIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSArICJfIiArIGZpbGUubmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZmlsZXMucHVzaChmaWxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgIH0sCgogICAgICAgIGRlbGV0ZUZpbGUoZmlsZUlkKSB7CgogICAgICAgICAgICBsZXQgZmlsZXMgPSB0aGlzLmZpbGVzLAogICAgICAgICAgICAgICAgZmlsZTsKCiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHsKCiAgICAgICAgICAgICAgICBmaWxlID0gZmlsZXNbaV07CgogICAgICAgICAgICAgICAgaWYgKGZpbGVJZCA9PT0gZmlsZS5pZCkKICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbGVzLnNwbGljZShpLCAxKTsKICAgICAgICAgICAgfQoKICAgICAgICB9LAoKICAgICAgICAvLyDstpTqsIAKICAgICAgICByZWdpc3RNZW1iZXJzKCkgewoKICAgICAgICAgICAgbGV0IGZpbGVzID0gdGhpcy5maWxlczsKCiAgICAgICAgICAgIC8vIOyXheuhnOuTnO2VoCDtjIzsnbzsnbQg7J6I64qU7KeAIO2ZleyduCDtm4QsIOynhO2WiQogICAgICAgICAgICBpZiAodGhpcy5maWxlcy5sZW5ndGggPT09IDApIHJldHVybjsKCiAgICAgICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHsKCiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGVzWycgKyBpICsgJ10nLCB0aGlzLmZpbGVzW2ldLCB0aGlzLmZpbGVzW2ldLmlkKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy5zaG93Lm1vZGFsID0gdHJ1ZTsKCiAgICAgICAgICAgIGF4aW9zLnBvc3QoJy9tYW5hZ2VtZW50L3JlZ2lzdE1lbWJlcnMvJywgZm9ybURhdGEsIHsKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLnRoZW4ocmVzdWx0ID0+IHsKCiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHJlc3VsdC5kYXRhOwoKICAgICAgICAgICAgICAgIGlmIChkYXRhLmNvZGUgPT0gMTAwMCkgewoKICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3cuc3VjY2Vzc0ZpbGVVcGxvYWRMYXllciA9IHRydWU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9KS5jYXRjaChleCA9PiB7CgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXgpOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAoKICAgICAgICBtb3ZlVG9Vc2VyUGFnZSgpIHsKCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvbWFuYWdlbWVudC91c2VyX3NlcnZlciIpOwogICAgICAgIH0KCiAgICB9LAogICAgbW91bnRlZCgpIHsKCiAgICAgICAgbGV0ICRkcm9wWm9uZSA9ICQodGhpcy4kcmVmcy5kcmFnQW5kRHJvcCksCiAgICAgICAgICAgICRmaWxlID0gJCh0aGlzLiRyZWZzLmZpbGUpLAogICAgICAgICAgICB0aGF0ID0gdGhpczsKCiAgICAgICAgLy9EcmFn6riw64qlCiAgICAgICAgJGRyb3Bab25lLm9uKCdkcmFnZW50ZXInLGZ1bmN0aW9uKGUpewoKICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICAgICAgLy8g65Oc66Gt64uk7Jq0IOyYgeyXrSBjc3MKICAgICAgICAgICAgJGRyb3Bab25lLmNzcygnYmFja2dyb3VuZC1jb2xvcicsJyNFM0YyRkMnKTsKCiAgICAgICAgfSkub24oJ2RyYWdsZWF2ZScsZnVuY3Rpb24oZSl7CgogICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CgogICAgICAgICAgICAvLyDrk5zroa3ri6TsmrQg7JiB7JetIGNzcwogICAgICAgICAgICAkZHJvcFpvbmUuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywnI0ZGRkZGRicpOwoKICAgICAgICB9KS5vbignZHJhZ292ZXInLGZ1bmN0aW9uKGUpewoKICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICAgICAgLy8g65Oc66Gt64uk7Jq0IOyYgeyXrSBjc3MKICAgICAgICAgICAgJGRyb3Bab25lLmNzcygnYmFja2dyb3VuZC1jb2xvcicsJyNFM0YyRkMnKTsKCiAgICAgICAgfSkub24oJ2Ryb3AnLGZ1bmN0aW9uKGUpewoKICAgICAgICAgICAgbGV0IGZpbGVzID0gZS5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5maWxlczsKCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGZpbGVzKQoKICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICAgICAgLy8g65Oc66Gt64uk7Jq0IOyYgeyXrSBjc3MKICAgICAgICAgICAgJGRyb3Bab25lLmNzcygnYmFja2dyb3VuZC1jb2xvcicsJyNGRkZGRkYnKTsKCiAgICAgICAgICAgIC8vIOyyqOu2gO2VnCDtjIzsnbwg7LK07YGsICYg7LKo67aAIO2MjOydvCDtkZzsi5wKICAgICAgICAgICAgdGhhdC5jaGVja0ZpbGVzKGZpbGVzLCB0aGF0LnJlZ2lzdE1lbWJlcnMpOwoKICAgICAgICB9KS5vbignY2xpY2snLCBmdW5jdGlvbihlKXsKCiAgICAgICAgICAgICRmaWxlLmNsaWNrKCk7CiAgICAgICAgfSk7CgogICAgICAgIC8vIO2MjOydvCDshKDtg50g7IucCiAgICAgICAgJGZpbGUub24oJ2NoYW5nZScsIGZ1bmN0aW9uKGUpewoKICAgICAgICAgICAgbGV0IGZpbGVzID0gZS50YXJnZXQuZmlsZXM7CgogICAgICAgICAgICAvLyDssqjrtoDtlZwg7YyM7J28IOyytO2BrCAmIOyyqOu2gCDtjIzsnbwg7ZGc7IucCiAgICAgICAgICAgIHRoYXQuY2hlY2tGaWxlcyhmaWxlcywgdGhhdC5yZWdpc3RNZW1iZXJzKTsKICAgICAgICB9KTsKICAgIH0KfQoKZnVuY3Rpb24gdmFsaWRFbWFpbChlbWFpbCkgewoKICAgIGxldCByZWdleD0vKFtcdy0uXSspQCgoXFtbMC05XXsxLDN9XC5bMC05XXsxLDN9XC5bMC05XXsxLDN9XC4pfCgoW1x3LV0rXC4pKykpKFthLXpBLVpdezIsNH18WzAtOV17MSwzfSkoXF0/KSQvOwoKICAgIHJldHVybiAoZW1haWwgIT0gJycgJiYgZW1haWwgIT0gJ3VuZGVmaW5lZCcgJiYgcmVnZXgudGVzdChlbWFpbCkpOwp9CgpmdW5jdGlvbiBkb3dubG9hZChzdHJEYXRhLCBzdHJGaWxlTmFtZSwgc3RyTWltZVR5cGUpIHsKICAgIGxldCBEID0gZG9jdW1lbnQsCiAgICAgICAgYSA9IEQuY3JlYXRlRWxlbWVudCgiYSIpOwogICAgICAgIHN0ck1pbWVUeXBlPSBzdHJNaW1lVHlwZSB8fCAiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtIjsKCgogICAgaWYgKG5hdmlnYXRvci5tc1NhdmVCbG9iKSB7IC8vIElFMTAKICAgICAgICByZXR1cm4gbmF2aWdhdG9yLm1zU2F2ZUJsb2IobmV3IEJsb2IoW3N0ckRhdGFdLCB7dHlwZTogc3RyTWltZVR5cGV9KSwgc3RyRmlsZU5hbWUpOwogICAgfSAvKiBlbmQgaWYobmF2aWdhdG9yLm1zU2F2ZUJsb2IpICovCgoKICAgIGlmICgnZG93bmxvYWQnIGluIGEpIHsgLy9odG1sNSBBW2Rvd25sb2FkXQogICAgICAgIGEuaHJlZiA9ICJkYXRhOiIgKyBzdHJNaW1lVHlwZSArICIsIiArIGVuY29kZVVSSUNvbXBvbmVudChzdHJEYXRhKTsKICAgICAgICBhLnNldEF0dHJpYnV0ZSgiZG93bmxvYWQiLCBzdHJGaWxlTmFtZSk7CiAgICAgICAgYS5pbm5lckhUTUwgPSAiZG93bmxvYWRpbmcuLi4iOwogICAgICAgIEQuYm9keS5hcHBlbmRDaGlsZChhKTsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICBhLmNsaWNrKCk7CiAgICAgICAgICAgIEQuYm9keS5yZW1vdmVDaGlsZChhKTsKICAgICAgICB9LCA2Nik7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9IC8qIGVuZCBpZignZG93bmxvYWQnIGluIGEpICovCgoKICAgIC8vZG8gaWZyYW1lIGRhdGFVUkwgZG93bmxvYWQgKG9sZCBjaCtGRik6CiAgICBsZXQgZiA9IEQuY3JlYXRlRWxlbWVudCgiaWZyYW1lIik7CiAgICBELmJvZHkuYXBwZW5kQ2hpbGQoZik7CiAgICBmLnNyYyA9ICJkYXRhOiIgKyAgc3RyTWltZVR5cGUgICArICIsIiArIGVuY29kZVVSSUNvbXBvbmVudChzdHJEYXRhKTsKCiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIEQuYm9keS5yZW1vdmVDaGlsZChmKTsKICAgIH0sIDMzMyk7CiAgICByZXR1cm4gdHJ1ZTsKfSAvKiBlbmQgZG93bmxvYWQoKSAqLwo="},{"version":3,"sources":["csv_invitation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"csv_invitation.vue","sourceRoot":"src/views/management/user_server","sourcesContent":["<template>\n    <article id=\"contents\" class=\"sub\">\n\t\t<location/>\n\n\t\t<div class=\"content\">\n\t\t\t<p class=\"intro_guide\">샘플 CSV 파일을 다운로드하고 편집하세요.</p>\n\t\t\t<table class=\"board_view\">\n\t\t\t\t<caption>수동으로 초대</caption>\n\t\t\t\t<colgroup>\n\t\t\t\t\t<col style=\"width:180px\" />\n\t\t\t\t\t<col style=\"width:*\" />\n\t\t\t\t</colgroup>\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th scope=\"row\">csv 파일 업로드</th>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<button type=\"button\" class=\"btn_basic\" @click=\"showTheSample\"><img src=\"@/assets/images/sub/ico_csv.png\" alt=\"\" class=\"ico\" />csv 샘플보기</button>\n\t\t\t\t\t\t\t<button type=\"button\" class=\"btn_basic\" @click=\"downloadTheSample\"><img src=\"@/assets/images/sub/ico_csv_download.png\" alt=\"\" class=\"ico\" />csv 샘플 다운로드</button>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td colspan=\"2\" style=\"height:400px;\">\n                            <div class=\"dragAndDrop\" ref=\"dragAndDrop\">\n                                <div class=\"text\">파일 드래그 엔 드랍 영역</div>\n                            </div>\n                            <input type=\"file\" class=\"hide\" ref=\"file\" multiple>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n                    <tr v-show=\"files.length\">\n                        <td colspan=\"2\" >\n                            <div v-for=\"file in files\">\n                                {{file.name}} <span class=\"pointer\" @click=\"deleteFile(file.id)\">X</span>\n                            </div>\n                        </td>\n                    </tr>\n\t\t\t\t</tbody>\n\t\t\t</table>\n<!--            <div class=\"board_btn_set\">-->\n<!--                <button type=\"button\" class=\"btn_basic submit\" @click=\"registMembers\">추가</button>-->\n<!--                <router-link to=\"/management/user_server\"><button type=\"button\" class=\"btn_basic cancel\">취소</button></router-link>-->\n<!--            </div>-->\n\t\t\t<ul class=\"desc_list\">\n\t\t\t\t<li>AOSBOX AI plus에 사용자를 초청하려면 <router-link to=\"/management/user_server/mail_invitation\">메일로 초대</router-link>를 사용합니다.</li>\n\t\t\t\t<li>수동으로 유저를 추가하려면 <router-link to=\"/management/user_server/manual_invitation\">수동으로 추가</router-link>를 사용합니다.</li>\n\t\t\t</ul>\n\t\t</div>\n\n        <!-- 가져오기 - 실패 -->\n        <div class=\"layer_popup\" v-show=\"show.failFileUploadLayer\">\n            <h3>가져오기</h3>\n            <div class=\"msg warning\">\n                <h4><img src=\"@/assets/images/component/ico_lp_warning.png\" alt=\"가져오기\" /></h4>\n                <p>\n                    <strong>\n                        파일의 형식이 맞지 않습니다.<br />\n                        올바른 CSV 파일의 형식을 선택하십시오.\n                    </strong>\n                </p>\n            </div>\n\n            <div class=\"btn_set\">\n                <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">닫기</button>\n            </div>\n            <button class=\"btn_close\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" @click=\"closeLayer\" /></button>\n        </div>\n\n        <!-- 가져오기 - 성공 -->\n        <div class=\"layer_popup\" v-show=\"show.successFileUploadLayer\">\n            <h3>가져오기</h3>\n            <div class=\"msg success\">\n                <h4><img src=\"@/assets/images/component/ico_lp_success.png\" alt=\"가져오기\" /></h4>\n                <p>\n                    <strong>가져오기에 성공하였습니다.</strong>\n                </p>\n            </div>\n\n            <div class=\"btn_set\">\n                <button type=\"button\" class=\"btn_basic cancel\" @click=\"moveToUserPage\">닫기</button>\n            </div>\n            <button class=\"btn_close\" @click=\"moveToUserPage\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" @click=\"closeLayer\" /></button>\n        </div>\n\n        <!-- 모달 배경 -->\n        <div class=\"modal_bg\" v-show=\"show.modal\"></div>\n\t</article>\n</template>\n\n<script>\n    import {saveAs} from 'file-saver'\n\n    export default {\n        name: \"csv_invitation\",\n        data() {\n          return {\n              show: {\n                  modal: false,\n                  failFileUploadLayer: false,\n                  successFileUploadLayer: false\n              },\n              files: []\n          }\n        },\n        methods: {\n\n            // csv 샘플보기\n            showTheSample() {\n\n                // TODO 팝업 생성\n            },\n\n            // csv 샘플 다운로드\n            downloadTheSample() {\n\n                saveAs('http://127.0.0.1:8080/AddMultipleUser.csv', 'AddMultipleUser.csv');\n            },\n\n            // layer 닫기\n            closeLayer() {\n\n                let show = this.show;\n\n                for (let prop in show) {\n\n                    show[prop] = false;\n                }\n            },\n\n            checkFiles(files, callback) {\n\n                let reader = new FileReader(),\n                    index = 0,\n                    valid = true,\n                    that = this,\n                    file,\n                    i;\n\n                /*\n                 * 드롭다운 된 파일이 올바른 CSV파일인지 검사\n                 * 1. CSV 파일인지 검사\n                 * 2. CSV 내용 형식이 맞는지 검사\n                 */\n                // 1\n                for (i = 0; i < files.length; i++) {\n\n                    let file = files[i];\n\n                    if (file.name.lastIndexOf(\".\") == -1 || file.name.slice(file.name.lastIndexOf(\".\") + 1).toLowerCase() !== 'csv') {\n\n                        this.show.failFileUploadLayer = true;\n                        this.show.modal = true;\n                        return;\n                    }\n                }\n\n                if (files.length == 0) return;\n\n                reader.readAsBinaryString(files[index]);\n\n                reader.onload = function(e) {\n\n                    let data = e.target.result;\n\n                    let dataArr = data.split(\"\\r\\n\");\n\n                    for (let j = 0; j < dataArr.length; j++) {\n\n                        if (j === 0) continue;\n\n                        let implData = dataArr[j];\n\n                        if (implData === '') break;\n\n                        let implDataArr = implData.split(\",\");\n\n                        let email = implDataArr[2];\n                        // console.log(email)\n                        if (!validEmail(email)) {\n\n                            that.show.failFileUploadLayer = true;\n                            that.show.modal = true;\n                            valid = false;\n                            return false;\n                        }\n                    }\n                }\n\n                reader.onloadend = function (e) {\n\n                    if (valid) {\n\n                        if (++index != files.length) {\n\n                            reader.readAsBinaryString(files[index]);\n\n                        } else {\n\n                            for (i = 0; i < files.length; i++) {\n\n                                file = files[i];\n                                file.id = Math.floor(Math.random() * 10000) + \"_\" + new Date().getTime() + \"_\" + file.name;\n                                that.files.push(file);\n                            }\n\n                            callback();\n                        }\n\n                    }\n                }\n\n            },\n\n            deleteFile(fileId) {\n\n                let files = this.files,\n                    file;\n\n                for (let i = 0; i < files.length; i++) {\n\n                    file = files[i];\n\n                    if (fileId === file.id)\n                        this.files.splice(i, 1);\n                }\n\n            },\n\n            // 추가\n            registMembers() {\n\n                let files = this.files;\n\n                // 업로드할 파일이 있는지 확인 후, 진행\n                if (this.files.length === 0) return;\n\n                const formData = new FormData();\n                for (let i = 0; i < files.length; i++) {\n\n                    formData.append('files[' + i + ']', this.files[i], this.files[i].id);\n                }\n\n                this.show.modal = true;\n\n                axios.post('/management/registMembers/', formData, {\n                    headers: {\n                        'Content-Type': 'multipart/form-data'\n                    }\n                }).then(result => {\n\n                    let data = result.data;\n\n                    if (data.code == 1000) {\n\n                        this.show.successFileUploadLayer = true;\n                    }\n\n                }).catch(ex => {\n\n                    console.log(ex);\n                });\n            },\n\n            moveToUserPage() {\n\n                this.$router.push(\"/management/user_server\");\n            }\n\n        },\n        mounted() {\n\n            let $dropZone = $(this.$refs.dragAndDrop),\n                $file = $(this.$refs.file),\n                that = this;\n\n            //Drag기능\n            $dropZone.on('dragenter',function(e){\n\n                e.stopPropagation();\n                e.preventDefault();\n\n                // 드롭다운 영역 css\n                $dropZone.css('background-color','#E3F2FC');\n\n            }).on('dragleave',function(e){\n\n                e.stopPropagation();\n                e.preventDefault();\n\n                // 드롭다운 영역 css\n                $dropZone.css('background-color','#FFFFFF');\n\n            }).on('dragover',function(e){\n\n                e.stopPropagation();\n                e.preventDefault();\n\n                // 드롭다운 영역 css\n                $dropZone.css('background-color','#E3F2FC');\n\n            }).on('drop',function(e){\n\n                let files = e.originalEvent.dataTransfer.files;\n\n                // console.log(files)\n\n                e.preventDefault();\n\n                // 드롭다운 영역 css\n                $dropZone.css('background-color','#FFFFFF');\n\n                // 첨부한 파일 체크 & 첨부 파일 표시\n                that.checkFiles(files, that.registMembers);\n\n            }).on('click', function(e){\n\n                $file.click();\n            });\n\n            // 파일 선택 시\n            $file.on('change', function(e){\n\n                let files = e.target.files;\n\n                // 첨부한 파일 체크 & 첨부 파일 표시\n                that.checkFiles(files, that.registMembers);\n            });\n        }\n    }\n\n    function validEmail(email) {\n\n        let regex=/([\\w-.]+)@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.)|(([\\w-]+\\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\\]?)$/;\n\n        return (email != '' && email != 'undefined' && regex.test(email));\n    }\n\n    function download(strData, strFileName, strMimeType) {\n        let D = document,\n            a = D.createElement(\"a\");\n            strMimeType= strMimeType || \"application/octet-stream\";\n\n\n        if (navigator.msSaveBlob) { // IE10\n            return navigator.msSaveBlob(new Blob([strData], {type: strMimeType}), strFileName);\n        } /* end if(navigator.msSaveBlob) */\n\n\n        if ('download' in a) { //html5 A[download]\n            a.href = \"data:\" + strMimeType + \",\" + encodeURIComponent(strData);\n            a.setAttribute(\"download\", strFileName);\n            a.innerHTML = \"downloading...\";\n            D.body.appendChild(a);\n            setTimeout(function() {\n                a.click();\n                D.body.removeChild(a);\n            }, 66);\n            return true;\n        } /* end if('download' in a) */\n\n\n        //do iframe dataURL download (old ch+FF):\n        let f = D.createElement(\"iframe\");\n        D.body.appendChild(f);\n        f.src = \"data:\" +  strMimeType   + \",\" + encodeURIComponent(strData);\n\n        setTimeout(function() {\n            D.body.removeChild(f);\n        }, 333);\n        return true;\n    } /* end download() */\n</script>\n\n<style scoped>\n.board_btn_set {\n    text-align: left;\n}\n.dragAndDrop {\n    display: table;\n    height: 100%;\n    width: 100%;\n    text-align: center;\n    border: gray solid 1px;\n}\n.dragAndDrop .text {\n    display: table-cell;\n    vertical-align: middle;\n}\n.hide {\n    display: none;\n}\n.layer_popup, .modal_bg {\n    display: block;\n}\n</style>\n"]}]}