{"remainingRequest":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/src/components/management/user_server/UserInfoService.vue?vue&type=style&index=0&id=6d10d8b0&scoped=true&lang=css&","dependencies":[{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/src/components/management/user_server/UserInfoService.vue","mtime":1582876129748},{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoubWVudV9sYXllciB7CiAgICBkaXNwbGF5OiBibG9jazsKfQoubWVudV9sYXllci51c2VyX2NvbnRleHQgewogICAgcG9zaXRpb246IGZpeGVkOwp9Cg=="},{"version":3,"sources":["UserInfoService.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmXA;AACA;AACA;AACA;AACA;AACA","file":"UserInfoService.vue","sourceRoot":"src/components/management/user_server","sourcesContent":["<template>\n    <div class=\"admin_list\">\n\n        <template v-if=\"list.length > 0\">\n            <table class=\"board_list\">\n                <caption>사용자 목록</caption>\n                <colgroup>\n                    <col style=\"width:*px\" />\n                    <col style=\"width:170px\" />\n                    <col style=\"width:140px\" />\n                    <col style=\"width:140px\" />\n                    <col style=\"width:220px\" />\n                    <col style=\"width:220px\" />\n                    <col style=\"width:180px\" />\n                    <col style=\"width:65px\" />\n                </colgroup>\n                <thead>\n                <tr>\n                    <th scope=\"col\"><a href=\"javascript:void(0)\" class=\"sorting\">서비스 이름</a></th>\n                    <th scope=\"col\"><a href=\"javascript:void(0)\" class=\"sorting on\">메일주소/전화번호</a></th>\n                    <th scope=\"col\"><a href=\"javascript:void(0)\" class=\"sorting\">마지막 조작</a></th>\n                    <th scope=\"col\"><a href=\"javascript:void(0)\" class=\"sorting\">최종 업로드</a></th>\n                    <th scope=\"col\"><a href=\"javascript:void(0)\" class=\"sorting\">최종 다운로드</a></th>\n                    <th scope=\"col\"><a href=\"javascript:void(0)\" class=\"sorting\">스토리지 제한</a></th>\n                    <th scope=\"col\"><a href=\"javascript:void(0)\" class=\"sorting\">사용한 용량</a></th>\n                    <th scope=\"col\">&nbsp;</th>\n                </tr>\n                </thead>\n                <tbody>\n                    <tr v-for=\"data in list\">\n                        <td class=\"left\">\n                            <template v-if=\"data.status == 1\">\n                                <img v-if=\"data.name == 'DB'\" src=\"@/assets/images/sub/ico_ad_dropbox_valid.png\" alt=\"DropBox\" class=\"ico_admin\" />\n                                <img v-else-if=\"data.name == 'BX'\" src=\"@/assets/images/sub/ico_ad_box_valid.png\" alt=\"Box\" class=\"ico_admin\" />\n                                <img v-else-if=\"data.name == 'IG'\" src=\"@/assets/images/sub/ico_ad_instagram_valid.png\" alt=\"Instagram\" class=\"ico_admin\" />\n                                <img v-else-if=\"data.name == 'GD'\" src=\"@/assets/images/sub/ico_ad_googledrive_valid.png\" alt=\"Google Drive\" class=\"ico_admin\" />\n                                <img v-else-if=\"data.name == 'OD'\" src=\"@/assets/images/sub/ico_ad_onedrive_valid.png\" alt=\"OneDrive\" class=\"ico_admin\" />\n                            </template>\n                            <template v-else-if=\"data.status == 2\">\n                                <img v-if=\"data.name == 'DB'\" src=\"@/assets/images/sub/ico_ad_dropbox_pause.png\" alt=\"DropBox\" class=\"ico_admin\" />\n                                <img v-else-if=\"data.name == 'BX'\" src=\"@/assets/images/sub/ico_ad_box_pause.png\" alt=\"Box\" class=\"ico_admin\" />\n                                <img v-else-if=\"data.name == 'IG'\" src=\"@/assets/images/sub/ico_ad_instagram_pause.png\" alt=\"Instagram\" class=\"ico_admin\" />\n                                <img v-else-if=\"data.name == 'GD'\" src=\"@/assets/images/sub/ico_ad_googledrive_pause.png\" alt=\"Google Drive\" class=\"ico_admin\" />\n                                <img v-else-if=\"data.name == 'OD'\" src=\"@/assets/images/sub/ico_ad_onedrive_pause.png\" alt=\"OneDrive\" class=\"ico_admin\" />\n                            </template>\n                            <a href=\"#\">\n                                <template v-if=\"data.name == 'DB'\">DropBox</template>\n                                <template v-if=\"data.name == 'BX'\">Box</template>\n                                <template v-if=\"data.name == 'IG'\">Instagram</template>\n                                <template v-if=\"data.name == 'GD'\">Google Drive</template>\n                                <template v-if=\"data.name == 'OD'\">OneDrive</template>\n                            </a>\n                        </td>\n                        <td>{{data.email}}</td>\n                        <td>{{expressDate(data.logdate, '-')}}</td>\n                        <td>{{expressDate(data.update, '-')}}</td>\n                        <td>{{expressDate(data.downdate, '-')}}</td>\n                        <td>{{expressLimit(data.gnrllimit)}}</td>\n                        <td>{{expressUsed(data.gnrlsto)}}</td>\n                        <td class=\"item_edit\">\n                            <button type=\"button\" @click=\"showContext($event, data.id, true)\" @mouseleave=\"hideContext($event, data.id)\">\n                                <i class=\"more\">더 많은</i>\n                            </button>\n                            <transition name=\"fade\">\n                                <div class=\"menu_layer user_context\" v-show=\"data.context.show\" @mouseenter=\"showContext($event, data.id)\" @mouseleave=\"hideContext($event, data.id)\" @click.stop>\n                                    <ul>\n                                        <li><a href=\"#\" @click=\"openLayer('backupLayer', data.id)\">이 드라이브를 백업</a></li>\n                                        <li><a href=\"#\" @click=\"openLayer('deleteServiceLayer', data.id, data.name)\">{{getServiceName(data.name)}}삭제</a></li>\n                                    </ul>\n                                </div>\n                            </transition>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n\n            <!-- 페이지 -->\n            <div class=\"page_navi\">\n              <a href=\"#\" class=\"guide prev\" @click=\"getList(prevPage)\">\n                <img src=\"@/assets/images/component/btn_page_prev.png\" alt=\"Prev\" class=\"ico\">\n              </a>\n              <template v-for=\"page in pageArr\">\n                  <a href=\"#\" class=\"num\" :class=\"{active: page.active}\" @click=\"getList(page.pageNo)\">{{ page.pageNo }}</a>\n              </template>\n              <a href=\"#\" class=\"guide next\" @click=\"getList(nextPage)\">\n                  <img src=\"@/assets/images/component/btn_page_next.png\" alt=\"Next\" class=\"ico\">\n              </a>\n            </div>\n        </template>\n\n        <div class=\"board_empty\" v-else>\n            <img src=\"@/assets/images/component/ico_admin_empty.png\" alt=\"\" class=\"ico\" />\n            <p>서비스가 없습니다.</p>\n        </div>\n\n        <!-- 이 드라이브를 백업 -->\n        <div class=\"layer_popup\" ref=\"backupLayer\">\n            <h3>이 드라이브를 백업</h3>\n            <div class=\"msg warning\">\n                <h4><img src=\"@/assets/images/component/ico_lp_warning.png\" alt=\"이 드라이브를 백업\" /></h4>\n                <p>\n                    <strong>이 단말기의 백업을 시작해도 될까요?</strong><br />\n                    이 과정은 시작하기까지 최대 15분 걸리는 경우가 있습니다.\n                </p>\n            </div>\n\n            <div class=\"btn_set\">\n                <div class=\"right\">\n                    <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">취소</button>\n                    <button type=\"button\" class=\"btn_basic submit\">확인</button>\n                </div>\n            </div>\n            <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n        </div>\n\n        <!-- service 삭제 -->\n        <div class=\"layer_popup\" ref=\"deleteServiceLayer\">\n            <h3>{{layer.selectedType}} 삭제</h3>\n            <div class=\"msg warning\">\n                <h4><img src=\"@/assets/images/component/ico_lp_warning.png\" alt=\"백업 게시\" /></h4>\n                <p>\n                    {{layer.selectedType}}를 제거하면 {{layer.selectedType}} 계정의 백업 서비스가 정지하고 AOSBOX AI plus의 모든 백업 데이터도 삭제됩니다.<br/>\n                    속행해도 되겠습니까?\n                </p>\n            </div>\n\n            <div class=\"btn_set\">\n                <div class=\"right\">\n                    <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">취소</button>\n                    <button type=\"button\" class=\"btn_basic submit\" @click=\"changeStorage('status', 'delete')\">확인</button>\n                </div>\n            </div>\n            <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n        </div>\n\n        <!-- 모달 배경 -->\n        <div class=\"modal_bg\" ref=\"modal\"></div>\n    </div>\n</template>\n\n<script>\nimport {commonMethodsMixin} from '../../../common/commonMethodsMixin'\nimport {listAndPageMixin} from '../../../common/listAndPageMixin'\n\nexport default {\n        name: \"UserInfoService\",\n    mixins: [commonMethodsMixin, listAndPageMixin],\n        data() {\n            return {\n                userId: '',\n                layer: {\n                    selectedId: 0,\n                    selectedType: ''\n                }\n            }\n        },\n        computed: {\n            statusText() {\n              return (value) => {\n\n                  let text = \"\";\n\n                  if (value === 1) text = '유효';\n                  else if (value === 2) text = '일시정지';\n                  else if (value === 3) text = '보존';\n                  else if (value === 4) text = '삭제';\n\n                  return text;\n              }\n            },\n        },\n        methods: {\n            showContext(event, id, adjustPosition) {\n\n                let $target = $(event.target)[0].nodeName === 'I' ? $(event.target).closest('button') : $(event.target),\n                    $td = $target.closest('td'),\n                    $context = $td.find('.menu_layer.user_context'),\n                    top,\n                    left;\n\n                event.stopPropagation();\n\n                let list = this.list;\n\n                for (let i = 0; i < list.length; i++) {\n\n                    if (list[i].id == id) {\n\n                        list[i].context.show = true;\n                    }\n                }\n\n                if (adjustPosition) {\n\n                    top = $target.offset().top,\n                    left = $target.offset().left + 2 - $context.outerWidth();\n                    $context.css(\"top\", top + \"px\").css(\"left\", left + \"px\");\n                }\n            },\n\n            hideContext(event, id, subName) {\n\n                event.stopPropagation();\n\n                let list = this.list;\n\n                for (let i = 0; i < list.length; i++) {\n\n                    if (list[i].id == id) {\n\n                        if (subName === undefined)\n                            list[i].context.show = false;\n                        else\n                            list[i].context[subName].show = false;\n                    }\n                }\n\n            },\n\n            getServiceName(serviceType) {\n\n                let serviceName;\n\n                switch (serviceType) {\n\n                    case 'DB':\n                        serviceName = 'DropBox';\n                        break;\n\n                    case 'BX':\n                        serviceName = 'Box';\n                        break;\n\n                    case 'IG':\n                        serviceName = 'Instagram';\n                        break;\n\n                    case 'GD':\n                        serviceName = 'Google Drive';\n                        break;\n\n                    case 'OD':\n                        serviceName = 'OneDrive';\n                        break;\n                }\n\n                return serviceName;\n            },\n\n            // 레이어 팝업 보이기\n            openLayer(layerName, id, serviceType) {\n\n                $(this.$refs.modal).show();\n                $(this.$refs[layerName]).show();\n\n                if (id)\n                    this.layer.selectedId = id;\n\n                if (serviceType)\n                    this.layer.selectedType = this.getServiceName(serviceType);\n            },\n\n            // 레이어 팝업 숨기기\n            closeLayer() {\n\n                $(this.$refs.modal).hide();\n                $(\".layer_popup\").hide();\n            },\n\n            unlimit(layerName) {\n\n               this.layer.value[layerName] = 0;\n            },\n\n            getList(pageNo) {\n\n                const self      = this;\n                let dataPerPage = this.pageInfo.dataPerPage,\n                    userId      = this.userId,\n                    listType    = 'CloudDriveService',\n                    url         = \"/management/user_server/detail/user/\" + userId + \"/list/\" + listType + \"/\",\n                    currentPage;\n\n                if (pageNo !== undefined)\n                    this.pageInfo.currentPage = pageNo;\n\n                currentPage = this.pageInfo.currentPage\n\n                axios.post(url, {currentPage: currentPage, dataPerPage: dataPerPage}).then(response => {\n\n                    let data = response.data;\n\n                    if (data.code == 1000) {\n\n                        let list = data.list,\n                            totalListCount = data.totalListCount,\n                            tempList = [];\n\n                        self.pageInfo.totalData = totalListCount;\n\n                        for (let i = 0; i < list.length; i++) {\n\n                            let data = list[i];\n                            let obj = {};\n\n                            for (let prop in data) {\n\n                                obj[prop.replace('bs_', '')] = data[prop];\n\n                                // switch(prop) {\n                                //     case 'bu_gnrlsto':\n                                //     case 'bu_coldsto':\n                                //     case 'bu_ocr':\n                                //         if (data[prop] == null)\n                                //             obj[prop.replace('bu_', '')] = 0;\n                                //         break;\n                                //     default:\n                                //         // do nothing\n                                // }\n                            }\n\n                            obj.context = {\n                                show: false\n                            };\n\n                            tempList.push(obj);\n                        }\n\n                        self.list = tempList;\n                        self.$emit('setTotalListCount', listType, totalListCount);\n                    }\n                }).catch(ex => {\n\n                    console.log(ex);\n                });\n            },\n\n            changeStorage(prop, value) {\n\n                let self = this,\n                    storageId = this.layer.selectedId;\n\n                axios.post('/management/changeUserStorage/', {\n                    storageId : storageId,\n                    prop: prop,\n                    value: value\n                }).then(response => {\n\n                    let data = response.data;\n\n                    if (data.code == 1000) {\n\n                        self.closeLayer();\n                        self.getList();\n                    }\n\n                }).catch(ex => {\n\n                    console.log(ex);\n                });\n            }\n        },\n        created() {\n\n            this.userId = this.$route.params.userId;\n            this.getList()\n        }\n    }\n</script>\n\n<style scoped>\n.menu_layer {\n    display: block;\n}\n.menu_layer.user_context {\n    position: fixed;\n}\n</style>"]}]}