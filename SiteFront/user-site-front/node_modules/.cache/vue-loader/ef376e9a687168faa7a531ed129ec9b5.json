{"remainingRequest":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/src/components/management/user_server/Server.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/src/components/management/user_server/Server.vue","mtime":1582876129745},{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7Y29tbW9uTWV0aG9kc01peGlufSBmcm9tICcuLi8uLi8uLi9jb21tb24vY29tbW9uTWV0aG9kc01peGluJwppbXBvcnQge2xpc3RBbmRQYWdlTWl4aW59IGZyb20gJy4uLy4uLy4uL2NvbW1vbi9saXN0QW5kUGFnZU1peGluJwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogIlNlcnZlciIsCiAgICBtaXhpbnM6IFtjb21tb25NZXRob2RzTWl4aW4sIGxpc3RBbmRQYWdlTWl4aW5dLAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBjb250ZXh0OiB7CiAgICAgICAgICAgICAgdXNlckFkZCA6IGZhbHNlLAogICAgICAgICAgICAgIGRldGFpbDogZmFsc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbGF5ZXI6IHsKICAgICAgICAgICAgICAgIGNoZWNrZWQ6IHsKICAgICAgICAgICAgICAgICAgICByZXN0cmljdEdlbmVyYWxTdG9yYWdlTGF5ZXI6IGZhbHNlLCAvLyDsnbzrsJgg7Iqk7Yag66as7KeAIOygnO2VnAogICAgICAgICAgICAgICAgICAgIHJlc3RyaWN0Q29sZFN0b3JhZ2VMYXllcjogZmFsc2UsICAgIC8vIOy9nOuTnCDsiqTthqDrpqzsp4Ag7KCc7ZWcCiAgICAgICAgICAgICAgICAgICAgcmVzdHJpY3RPY3JQYWdlTGF5ZXI6IGZhbHNlLCAgICAgICAgLy8gT0NSIO2OmOydtOyngCDsiJgg7KCc7ZWcCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgdmFsdWU6IHsKICAgICAgICAgICAgICAgICAgICBnbnJsbGltaXQ6IDAsCiAgICAgICAgICAgICAgICAgICAgY29sZGxpbWl0OiAwLAogICAgICAgICAgICAgICAgICAgIG9jcmxpbWl0OiAwLAogICAgICAgICAgICAgICAgICAgIG5hbWU6ICcnLAogICAgICAgICAgICAgICAgICAgIHBvbGljeUxpc3Q6IFtdLAogICAgICAgICAgICAgICAgICAgIHBvbGljeUlkOiAwCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc2VsZWN0ZWlkOiBbXSAgICAgICAgICAgICAgLy8g7ISg7YOd65CcIGlkCiAgICAgICAgICAgIH0sCiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6IHsKCiAgICAgICAgc2V0UG9saWN5TmFtZShwb2xpY3luYW1lKSB7CgogICAgICAgICAgICByZXR1cm4gcG9saWN5bmFtZSA/IHBvbGljeW5hbWUgOiAn7IKs7Jqp7J6QIOygleydmCc7CiAgICAgICAgfSwKCiAgICAgICAgc2hvd0NvbnRleHQoZXZlbnQsIGlkLCBhZGp1c3RQb3NpdGlvbikgewoKICAgICAgICAgICAgbGV0ICR0YXJnZXQgPSAkKGV2ZW50LnRhcmdldClbMF0ubm9kZU5hbWUgPT09ICdJJyA/ICQoZXZlbnQudGFyZ2V0KS5jbG9zZXN0KCdidXR0b24nKSA6ICQoZXZlbnQudGFyZ2V0KSwKICAgICAgICAgICAgICAgICR0ZCA9ICR0YXJnZXQuY2xvc2VzdCgndGQnKSwKICAgICAgICAgICAgICAgICRjb250ZXh0ID0gJHRkLmZpbmQoJy5tZW51X2xheWVyLnVzZXJfY29udGV4dCcpLAogICAgICAgICAgICAgICAgdG9wLAogICAgICAgICAgICAgICAgbGVmdDsKCiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwoKICAgICAgICAgICAgbGV0IGxpc3QgPSB0aGlzLmxpc3Q7CgogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHsKCiAgICAgICAgICAgICAgICBpZiAobGlzdFtpXS5pZCA9PSBpZCkgewoKICAgICAgICAgICAgICAgICAgICBsaXN0W2ldLmNvbnRleHQuc2hvdyA9IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChhZGp1c3RQb3NpdGlvbikgewoKICAgICAgICAgICAgICAgIHRvcCA9ICR0YXJnZXQub2Zmc2V0KCkudG9wLAogICAgICAgICAgICAgICAgbGVmdCA9ICR0YXJnZXQub2Zmc2V0KCkubGVmdCArIDIgLSAkY29udGV4dC5vdXRlcldpZHRoKCk7CiAgICAgICAgICAgICAgICAkY29udGV4dC5jc3MoInRvcCIsIHRvcCArICJweCIpLmNzcygibGVmdCIsIGxlZnQgKyAicHgiKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgaGlkZUNvbnRleHQoZXZlbnQsIGlkLCBzdWJOYW1lKSB7CgogICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKCiAgICAgICAgICAgIGxldCBsaXN0ID0gdGhpcy5saXN0OwoKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7CgogICAgICAgICAgICAgICAgaWYgKGxpc3RbaV0uaWQgPT0gaWQpIHsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHN1Yk5hbWUgPT09IHVuZGVmaW5lZCkKICAgICAgICAgICAgICAgICAgICAgICAgbGlzdFtpXS5jb250ZXh0LnNob3cgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RbaV0uY29udGV4dFtzdWJOYW1lXS5zaG93ID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgfSwKCiAgICAgICAgIC8vIOyEoO2DneuQnCDsnKDsoIAg7KCV67O0CiAgICAgICAgZ2V0U2VsZWN0ZWlkcygpIHsKCiAgICAgICAgICAgIGxldCBzZWxlY3RlaWRzID0gW10sCiAgICAgICAgICAgICAgICBsaXN0ID0gdGhpcy5saXN0LAogICAgICAgICAgICAgICAgZGF0YSwKICAgICAgICAgICAgICAgIGk7CgogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykgewoKICAgICAgICAgICAgICAgIGRhdGEgPSBsaXN0W2ldOwoKICAgICAgICAgICAgICAgIGlmIChkYXRhLmNoZWNrZWQpCiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWlkcy5wdXNoKGRhdGEuaWQpOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aGlzLmxheWVyLnNlbGVjdGVpZCA9IHNlbGVjdGVpZHM7CgogICAgICAgICAgICByZXR1cm4gc2VsZWN0ZWlkczsKICAgICAgICB9LAoKICAgICAgICBjaGVja1NlbGVjdGVpZChzZWxlY3RlaWRzKSB7CgogICAgICAgICAgICBpZiAoc2VsZWN0ZWlkcy5sZW5ndGggPT0gMCkgewoKICAgICAgICAgICAgICAgIHRoaXMub3BlbkxheWVyKCdub1NlbGVjdGVkU2VydmVyTGF5ZXInKTsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSwKCiAgICAgICAgY2hlY2tTZWxlY3RlZEFuZE9wZW5MYXllcihsYXllck5hbWUsIGlkKSB7CgogICAgICAgICAgICBsZXQgaWRzID0gW2lkXSwKICAgICAgICAgICAgICAgIGxpc3QgPSB0aGlzLmxpc3QsCiAgICAgICAgICAgICAgICBhbHJlYWR5QWN0aXZlID0gZmFsc2U7CgogICAgICAgICAgICBpZiAoIWlkKQogICAgICAgICAgICAgICAgaWRzID0gdGhpcy5nZXRTZWxlY3RlaWRzKCk7CgogICAgICAgICAgICAvLyDshKDtg53sl6zrtoAg6rKA7IKsCiAgICAgICAgICAgIGlmICghdGhpcy5jaGVja1NlbGVjdGVpZChpZHMpKSByZXR1cm47CgogICAgICAgICAgICAvLyDshJzrsoQg7Jyg7Zqo7ZmUCiAgICAgICAgICAgIGlmIChsYXllck5hbWUgPT09ICdhY3RpdmF0ZVNlcnZlckxheWVyJykgewoKICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrQWxyZWFkeUFjdGl2ZShpZHMpKSByZXR1cm47CgogICAgICAgICAgICAvLyDshJzrsoQg7JWE7Lm07J2067iMCiAgICAgICAgICAgIH0gZWxzZSBpZiAobGF5ZXJOYW1lID09PSAnYXJjaGl2ZVNlcnZlckxheWVyJykgewoKICAgICAgICAgICAgLy8g7ISc67KEIOydtOumhOuzgOqyvQogICAgICAgICAgICB9IGVsc2UgaWYgKGxheWVyTmFtZSA9PT0gJ2NoYW5nZVNlcnZlck5hbWVMYXllcicpIHsKCiAgICAgICAgICAgICAgICB0aGlzLnNldFN0b3JhZ2VOYW1lT25MYXllcihpZCk7CgogICAgICAgICAgICAvLyDsoJXssYUg7IKt7KCcCiAgICAgICAgICAgIH0gZWxzZSBpZiAobGF5ZXJOYW1lID09PSAnZGVsZXRlUG9saWN5TGF5ZXInKSB7CgogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxpc3QubGVuZ3RoOyBpKyspIHsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubGlzdFtpXS5pZCA9PSBpZCkgewoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmxpc3RbaV0ucG9saWN5aWQpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5MYXllcignbm9Qb2xpY3lUb0RlbGV0ZUxheWVyJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAvLyDsoJXssYUg7IiY7KCVCiAgICAgICAgICAgIH0gZWxzZSBpZiAobGF5ZXJOYW1lID09PSAnY2hhbmdlUG9saWN5TGF5ZXInKSB7CgogICAgICAgICAgICAgICAgbGV0IHBvbGljeUlkOwoKICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5saXN0Lmxlbmd0aDsgaSsrKSB7CgogICAgICAgICAgICAgICAgICAgIGlmIChpZCA9PT0gdGhpcy5saXN0W2ldLmlkKQogICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lJZCA9IHRoaXMubGlzdFtpXS5wb2xpY3lpZCA/IHRoaXMubGlzdFtpXS5wb2xpY3lpZCA6IDA7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgYXhpb3MucG9zdCgiL21hbmFnZW1lbnQvZ2V0UG9saWN5TGlzdC8iKS50aGVuKHJlc3BvbnNlID0+IHsKCiAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGEgPSByZXNwb25zZS5kYXRhOwoKICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5jb2RlID09PSAxMDAwKSB7CgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxheWVyLnZhbHVlLnBvbGljeUxpc3QgPSBkYXRhLnBvbGljeUxpc3Q7CgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxheWVyLnZhbHVlLnBvbGljeUlkID0gcG9saWN5SWQ7CgogICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0U2VsZWN0Qm94KCQoJyNtb2RpZnlQb2xpY3lfc2VydmVyJykucGFyZW50KCIuc2VsZWN0Ym94X3VpIikpOwogICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDApOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB9KS5jYXRjaChleCA9PiB7CgogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGV4KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aGlzLm9wZW5MYXllcihsYXllck5hbWUpOwogICAgICAgICAgICB0aGlzLmxheWVyLnNlbGVjdGVpZCA9IGlkczsKICAgICAgICB9LAoKICAgICAgICBzZXRTdG9yYWdlTmFtZU9uTGF5ZXIoaWQpIHsKCiAgICAgICAgICAgIGxldCBsaXN0ID0gdGhpcy5saXN0LAogICAgICAgICAgICAgICAgaTsKCiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7CgogICAgICAgICAgICAgICAgaWYgKGxpc3RbaV0uaWQgPT0gaWQpIHsKCiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXllci52YWx1ZS5uYW1lID0gbGlzdFtpXS5uYW1lOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgY2hlY2tBbHJlYWR5QWN0aXZlKGlkcykgewoKICAgICAgICAgICAgbGV0IGxpc3QgPSB0aGlzLmxpc3QsCiAgICAgICAgICAgICAgICBhbHJlYWR5QWN0aXZlID0gZmFsc2UsCiAgICAgICAgICAgICAgICBpLAogICAgICAgICAgICAgICAgajsKCiAgICAgICAgICAgIC8vIOydtOuvuCDsnKDtmqjtmZQg6rKA7IKsCiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7CgogICAgICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IGlkcy5sZW5ndGg7IGorKykgewoKICAgICAgICAgICAgICAgICAgICBpZiAobGlzdFtpXS5pZCA9PSBpZHNbal0gJiYgbGlzdFtpXS5zdGF0dXMgPT09IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYWxyZWFkeUFjdGl2ZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGFscmVhZHlBY3RpdmUpCiAgICAgICAgICAgICAgICB0aGlzLm9wZW5MYXllcignYWxyZWFkeUFjdGl2YXRlZENvbXB1dGVyTGF5ZXInKTsKCiAgICAgICAgICAgIHJldHVybiBhbHJlYWR5QWN0aXZlOwogICAgICAgIH0sCgogICAgICAgIC8vIOugiOydtOyWtCDtjJ3sl4Ug67O07J206riwCiAgICAgICAgb3BlbkxheWVyKGxheWVyTmFtZSwgaWQpIHsKCiAgICAgICAgICAgICQodGhpcy4kcmVmcy5tb2RhbCkuc2hvdygpOwogICAgICAgICAgICAkKHRoaXMuJHJlZnNbbGF5ZXJOYW1lXSkuc2hvdygpOwoKICAgICAgICAgICAgaWYgKGlkKQogICAgICAgICAgICAgICAgdGhpcy5sYXllci5zZWxlY3RlaWQgPSBpZDsKICAgICAgICB9LAoKICAgICAgICAvLyDroIjsnbTslrQg7Yyd7JeFIOyIqOq4sOq4sAogICAgICAgIGNsb3NlTGF5ZXIoKSB7CgogICAgICAgICAgICAkKHRoaXMuJHJlZnMubW9kYWwpLmhpZGUoKTsKICAgICAgICAgICAgJCgiLmxheWVyX3BvcHVwIikuaGlkZSgpOwogICAgICAgIH0sCgogICAgICAgIHVubGltaXQodmFsdWVOYW1lKSB7CgogICAgICAgICAgIHRoaXMubGF5ZXIudmFsdWVbdmFsdWVOYW1lXSA9ICcnOwogICAgICAgIH0sCgogICAgICAgIC8vIOydvOuwmCDsiqTthqDrpqzsp4Ag7KCc7ZWcLCDsvZzrk5wg7Iqk7Yag66as7KeAIOygnO2VnCwgT1JDIO2OmOydtOyngCDsoJztlZwg67KE7Yq8IO2BtOumrSDsi5wsIOugiOydtOyWtCDtjJ3sl4UKICAgICAgICByZXN0cmljdExheWVyKGxheWVyVHlwZSwgaWQpIHsKCiAgICAgICAgICAgIGxldCBpZHMgPSBbaWRdLAogICAgICAgICAgICAgICAgbGF5ZXJOYW1lID0gJycsCiAgICAgICAgICAgICAgICBsaW1pdE5hbWUgPSAnJywKICAgICAgICAgICAgICAgIHNpemUgPSAnJywKICAgICAgICAgICAgICAgIGNoZWNrID0gZmFsc2U7CgogICAgICAgICAgICBzd2l0Y2gobGF5ZXJUeXBlKSB7CiAgICAgICAgICAgICAgICBjYXNlICdnbnJsJzoKICAgICAgICAgICAgICAgICAgICBsYXllck5hbWUgPSAncmVzdHJpY3RHZW5lcmFsU3RvcmFnZUxheWVyJzsKICAgICAgICAgICAgICAgICAgICBsaW1pdE5hbWUgPSAnZ25ybGxpbWl0JzsKICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICBjYXNlICdjb2xkJzoKICAgICAgICAgICAgICAgICAgICBsYXllck5hbWUgPSAncmVzdHJpY3RDb2xkU3RvcmFnZUxheWVyJzsKICAgICAgICAgICAgICAgICAgICBsaW1pdE5hbWUgPSAnY29sZGxpbWl0JzsKICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICBjYXNlICdvY3InOgogICAgICAgICAgICAgICAgICAgIGxheWVyTmFtZSA9ICdyZXN0cmljdE9jclBhZ2VMYXllcic7CiAgICAgICAgICAgICAgICAgICAgbGltaXROYW1lID0gJ29jcmxpbWl0JzsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJCh0aGlzLiRyZWZzW2xheWVyTmFtZV0pLmZpbmQoImlucHV0IikuY3NzKCJib3JkZXItY29sb3IiLCAiI0NDQ0NDQyIpOwoKICAgICAgICAgICAgaWYgKGlkID09PSB1bmRlZmluZWQpIHsKCiAgICAgICAgICAgICAgICBpZHMgPSB0aGlzLmdldFNlbGVjdGVpZHMoKTsKCiAgICAgICAgICAgIH0gZWxzZSB7CgogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxpc3QubGVuZ3RoOyBpKyspIHsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubGlzdFtpXS5pZCA9PSBpZCkgewoKICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZSA9IHRoaXMubGlzdFtpXVtsaW1pdE5hbWVdOwogICAgICAgICAgICAgICAgICAgICAgICBjaGVjayA9IHNpemUgPT09ICcnID8gdHJ1ZSA6IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy5sYXllci52YWx1ZVtsaW1pdE5hbWVdID0gc2l6ZTsKICAgICAgICAgICAgdGhpcy5sYXllci5jaGVja2VkW2xheWVyTmFtZV0gPSBjaGVjazsKCiAgICAgICAgICAgIC8vIOycoOyggCDshKDtg53sl6zrtoAg6rKA7IKsCiAgICAgICAgICAgIGlmICghdGhpcy5jaGVja1NlbGVjdGVpZChpZHMpKSByZXR1cm47CgogICAgICAgICAgICB0aGlzLm9wZW5MYXllcihsYXllck5hbWUpOwogICAgICAgICAgICB0aGlzLmxheWVyLnNlbGVjdGVpZCA9IGlkczsKICAgICAgICB9LAoKICAgICAgICBnZXRMaXN0KHBhZ2VObykgewoKICAgICAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7CgogICAgICAgICAgICBpZiAocGFnZU5vICE9PSB1bmRlZmluZWQpCiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VJbmZvLmN1cnJlbnRQYWdlID0gcGFnZU5vOwoKICAgICAgICAgICAgdGhpcy5zZXRQYWdlTG9hZEluZm8oKTsKCiAgICAgICAgICAgIGF4aW9zLnBvc3QoIi9tYW5hZ2VtZW50L3VzZXJfc2VydmVyL2xpc3QvU2VydmVyLyIsIHsKICAgICAgICAgICAgICAgIHNlYXJjaFRleHQ6IHRoaXMucGFnZUluZm8uc2VhcmNoVGV4dCwKICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlOiB0aGlzLnBhZ2VJbmZvLmN1cnJlbnRQYWdlLAogICAgICAgICAgICAgICAgZGF0YVBlclBhZ2U6IHRoaXMucGFnZUluZm8uZGF0YVBlclBhZ2UsCiAgICAgICAgICAgICAgICBvcmRlck5hbWUgOiB0aGlzLnBhZ2VJbmZvLm9yZGVyTmFtZSwKICAgICAgICAgICAgICAgIG9yZGVyVHlwZSA6IHRoaXMucGFnZUluZm8ub3JkZXJUeXBlCiAgICAgICAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gewoKICAgICAgICAgICAgICAgIGxldCBkYXRhID0gcmVzcG9uc2UuZGF0YTsKCiAgICAgICAgICAgICAgICBpZiAoZGF0YS5jb2RlID09IDEwMDApIHsKCiAgICAgICAgICAgICAgICAgICAgbGV0IGxpc3QgPSBkYXRhLmxpc3QsCiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsTGlzdENvdW50ID0gZGF0YS50b3RhbExpc3RDb3VudCwKICAgICAgICAgICAgICAgICAgICAgICAgaGF2ZU5ldyA9IHJlc3BvbnNlLmRhdGEuaGF2ZU5ldywKICAgICAgICAgICAgICAgICAgICAgICAgdGVtcExpc3QgPSBbXTsKCiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlSW5mby50b3RhbERhdGEgPSB0b3RhbExpc3RDb3VudDsKCiAgICAgICAgICAgICAgICAgICAgc2VsZi4kZW1pdCgnc2V0SGF2ZU5ldycsICdTZXJ2ZXInLCBoYXZlTmV3KTsKCiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7CgogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IGxpc3RbaV07CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvYmogPSB7fTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHByb3AgaW4gZGF0YSkgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuZXdQcm9wTmFtZSA9IHByb3AucmVwbGFjZSgnYnNfJywgJycpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ialtuZXdQcm9wTmFtZV0gPSBkYXRhW3Byb3BdOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaChwcm9wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnYnNfZ25ybGxpbWl0JzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdic19jb2xkbGltaXQnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2JzX29jcmxpbWl0JzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFbcHJvcF0gPT0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ialtuZXdQcm9wTmFtZV0gPSAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvIG5vdGhpbmcKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmlkID0gbGlzdFtpXS5ic19pZDsKICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmNoZWNrZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmNvbnRleHQgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93OiBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgdGVtcExpc3QucHVzaChvYmopOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgc2VsZi5saXN0ID0gdGVtcExpc3Q7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLmNhdGNoKGV4ID0+IHsKCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhleCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCgogICAgICAgIHNldFBhZ2VMb2FkSW5mbygpIHsKCiAgICAgICAgICAgIGxldCBwYXlsb2FkID0gewogICAgICAgICAgICAgICAgY3VycmVudFBhZ2U6IHRoaXMucGFnZUluZm8uY3VycmVudFBhZ2UsCiAgICAgICAgICAgICAgICBzZWFyY2hUZXh0OiB0aGlzLnBhZ2VJbmZvLnNlYXJjaFRleHQsCiAgICAgICAgICAgIH07CgogICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnbWFpbi9zZXRQYWdlTG9hZEluZm8nLCBwYXlsb2FkKTsKICAgICAgICB9LAoKICAgICAgICBjaGFuZ2VTdG9yYWdlKHByb3AsIHZhbHVlLCBmdW5jKSB7CgogICAgICAgICAgICBsZXQgc2VsZiA9IHRoaXMsCiAgICAgICAgICAgICAgICBzZWxlY3RlaWQgPSB0aGlzLmxheWVyLnNlbGVjdGVpZCwKICAgICAgICAgICAgICAgICR0YXJnZXRJbnB1dCwKICAgICAgICAgICAgICAgIGxheWVyTmFtZSwKICAgICAgICAgICAgICAgIHVubGltaXRDaGVja2VkOyAvLyDrrLTsoJztlZwg7LK07YGsIOyXrOu2gAoKICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7CgogICAgICAgICAgICAgICAgY2FzZSAnbmFtZSc6CiAgICAgICAgICAgICAgICBjYXNlICdnbnJsbGltaXQnOgogICAgICAgICAgICAgICAgY2FzZSAnY29sZGxpbWl0JzoKICAgICAgICAgICAgICAgIGNhc2UgJ29jcmxpbWl0JzoKICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMubGF5ZXIudmFsdWVbcHJvcF07CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChwcm9wID09ICdnbnJsbGltaXQnIHx8IHByb3AgPT0gJ2NvbGRsaW1pdCcgfHwgcHJvcCA9PSAnb2NybGltaXQnKSB7CgogICAgICAgICAgICAgICAgaWYgKHByb3AgPT0gJ2ducmxsaW1pdCcpCiAgICAgICAgICAgICAgICAgICAgbGF5ZXJOYW1lID0gJ3Jlc3RyaWN0R2VuZXJhbFN0b3JhZ2VMYXllcic7CiAgICAgICAgICAgICAgICBlbHNlIGlmIChwcm9wID09ICdjb2xkbGltaXQnKQogICAgICAgICAgICAgICAgICAgIGxheWVyTmFtZSA9ICdyZXN0cmljdENvbGRTdG9yYWdlTGF5ZXInOwogICAgICAgICAgICAgICAgZWxzZSBpZiAocHJvcCA9PSAnb2NybGltaXQnKQogICAgICAgICAgICAgICAgICAgIGxheWVyTmFtZSA9ICdyZXN0cmljdE9jclBhZ2VMYXllcic7CgogICAgICAgICAgICAgICAgJHRhcmdldElucHV0ID0gJCh0aGlzLiRyZWZzW2xheWVyTmFtZV0pLmZpbmQoJ2lucHV0Jyk7CiAgICAgICAgICAgICAgICB1bmxpbWl0Q2hlY2tlZCA9IHRoaXMubGF5ZXIuY2hlY2tlZFtsYXllck5hbWVdOwoKICAgICAgICAgICAgICAgIGlmICgodmFsdWUgIT09ICcnICYmIHZhbHVlIDw9IDApIHx8ICh2YWx1ZSA9PT0gJycgJiYgIXVubGltaXRDaGVja2VkKSkgewoKICAgICAgICAgICAgICAgICAgICAkdGFyZ2V0SW5wdXQuY3NzKCJib3JkZXItY29sb3IiLCAicmVkIik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBheGlvcy5wb3N0KCcvbWFuYWdlbWVudC9jaGFuZ2VVc2VyU3RvcmFnZS8nLCB7CiAgICAgICAgICAgICAgICBzdG9yYWdlSWRzIDogc2VsZWN0ZWlkLAogICAgICAgICAgICAgICAgcHJvcDogcHJvcCwKICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZQogICAgICAgICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsKCiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CgogICAgICAgICAgICAgICAgaWYgKGRhdGEuY29kZSA9PSAxMDAwKSB7CgogICAgICAgICAgICAgICAgICAgIHNlbGYuY2xvc2VMYXllcigpOwogICAgICAgICAgICAgICAgICAgIHNlbGYuZ2V0TGlzdCgpOwoKICAgICAgICAgICAgICAgICAgICBpZiAoZnVuYykgZnVuYygpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfSkuY2F0Y2goZXggPT4gewoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGV4KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKCiAgICAgICAgZG93bmxvYWRDU1YoKSB7CgogICAgICAgICAgICBheGlvcy5wb3N0KCIvbWFuYWdlbWVudC9kb3dubG9hZENTVi9saXN0L1NlcnZlci8iLCB7CiAgICAgICAgICAgICAgICBzZWFyY2hUZXh0OiB0aGlzLnBhZ2VJbmZvLnNlYXJjaFRleHQsCiAgICAgICAgICAgICAgICBjdXJyZW50UGFnZTogdGhpcy5wYWdlSW5mby5jdXJyZW50UGFnZSwKICAgICAgICAgICAgICAgIGRhdGFQZXJQYWdlOiB0aGlzLnBhZ2VJbmZvLmRhdGFQZXJQYWdlLAogICAgICAgICAgICAgICAgb3JkZXJOYW1lIDogdGhpcy5wYWdlSW5mby5vcmRlck5hbWUsCiAgICAgICAgICAgICAgICBvcmRlclR5cGUgOiB0aGlzLnBhZ2VJbmZvLm9yZGVyVHlwZQogICAgICAgICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsKCiAgICAgICAgICAgICAgICBpZihyZXNwb25zZS5kYXRhLnNpemUgPCAxKXsKICAgICAgICAgICAgICAgICAgICBhbGVydCgiQ2FuIG5vdCBkb3dubG9hZCIpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBsZXQgYmxvYiA9IG5ldyBCbG9iKFsnXHVmZWZmJyArIHJlc3BvbnNlLmRhdGFdLCB7dHlwZTogcmVzcG9uc2UuaGVhZGVyc1snY29udGVudC10eXBlJ119KTsKICAgICAgICAgICAgICAgIGxldCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgICAgICAgICAgbGluay5ocmVmID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgICAgICAgICAgICBsaW5rLmRvd25sb2FkID0gJ3NlcnZlckxpc3QuY3N2JzsKICAgICAgICAgICAgICAgIGxpbmsuY2xpY2soKTsKCiAgICAgICAgICAgIH0pLmNhdGNoKGV4ID0+IHsKCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhleCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCgogICAgICAgIC8vIOuqqeuhnSDsoJXroKwKICAgICAgICBzb3J0TGlzdChldmVudCkgewoKICAgICAgICAgICAgbGV0ICR0YXJnZXQgPSAkKGV2ZW50LnRhcmdldCksCiAgICAgICAgICAgICAgICBvcmRlclR5cGUgPSAkdGFyZ2V0LmRhdGEoJ3NvcnQnKSwKICAgICAgICAgICAgICAgICRzb3J0aW5ncyA9ICQoImEuc29ydGluZyIpOwoKICAgICAgICAgICAgLy8g64KY66i47KeAIOu5hO2ZnOyEse2ZlAogICAgICAgICAgICAkc29ydGluZ3MuZWFjaChmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICAgICAgaWYgKCQodGhpcylbMF0gIT0gJHRhcmdldFswXSkgewoKICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdpbmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdvbicpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKCgogICAgICAgICAgICBpZiAoJHRhcmdldC5oYXNDbGFzcygnaW5hY3RpdmUnKSkgewoKICAgICAgICAgICAgICAgIC8vIO2VtOuLuSDtla3rqqkg7Zmc7ISx7ZmUCiAgICAgICAgICAgICAgICAkdGFyZ2V0LnJlbW92ZUNsYXNzKCdpbmFjdGl2ZScpOwogICAgICAgICAgICAgICAgJHRhcmdldC5hZGRDbGFzcygnb24nKTsKCiAgICAgICAgICAgIH0gZWxzZSB7CgogICAgICAgICAgICAgICAgaWYgKCR0YXJnZXQuaGFzQ2xhc3MoJ29uJykpIHsKCiAgICAgICAgICAgICAgICAgICAgJHRhcmdldC5yZW1vdmVDbGFzcygnb24nKTsKCiAgICAgICAgICAgICAgICB9IGVsc2UgewoKICAgICAgICAgICAgICAgICAgICAkdGFyZ2V0LmFkZENsYXNzKCdpbmFjdGl2ZScpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICB0aGlzLnNldFNvcnQoKTsKICAgICAgICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICAgICAgfSwKCiAgICAgICAgc2V0U29ydCgpIHsKCiAgICAgICAgICAgIGxldCBvcmRlck5hbWUgPSAnJywKICAgICAgICAgICAgICAgIG9yZGVyVHlwZSA9ICcnOwoKICAgICAgICAgICAgJCgiYS5zb3J0aW5nIikuZWFjaChmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoImluYWN0aXZlIikpIHsKCiAgICAgICAgICAgICAgICAgICAgLy8gZG8gbm90aGluZwoKICAgICAgICAgICAgICAgIH0gZWxzZSB7CgogICAgICAgICAgICAgICAgICAgIG9yZGVyTmFtZSA9ICQodGhpcykuZGF0YSgic29ydCIpOwogICAgICAgICAgICAgICAgICAgIG9yZGVyVHlwZSA9ICQodGhpcykuaGFzQ2xhc3MoJ29uJykgPyAnYXNjJyA6ICdkZXNjJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICB0aGlzLnBhZ2VJbmZvLm9yZGVyTmFtZSA9IG9yZGVyTmFtZTsKICAgICAgICAgICAgdGhpcy5wYWdlSW5mby5vcmRlclR5cGUgPSBvcmRlclR5cGU7CiAgICAgICAgfSwKCiAgICAgICAgLy8g67Cx7JeFIOqwnOyLnCDrsoTtirwg7YG066atIOyLnAogICAgICAgIGdldFN0YXJ0ZWRCYWNrdXAoaWQpIHsKCiAgICAgICAgICAgIGxldCBiYWNrdXA7CgogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGlzdC5sZW5ndGg7IGkrKykgewoKICAgICAgICAgICAgICAgIGlmIChpZCA9PSB0aGlzLmxpc3RbaV0uaWQpIHsKCiAgICAgICAgICAgICAgICAgICAgYmFja3VwID0gdGhpcy5saXN0W2ldLmJhY2t1cDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGJhY2t1cCA9PT0gMCB8fCBiYWNrdXAgPT09IDEpIHsKCiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrU2VsZWN0ZWRBbmRPcGVuTGF5ZXIoJ2JhY2t1cExheWVyJywgaWQpOwogICAgICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICAgICAgfSBlbHNlIGlmIChiYWNrdXAgPT09IDIpIHsKCiAgICAgICAgICAgICAgICB0aGlzLm9wZW5MYXllcignYWxyZWFkeVN0YXJ0ZWRCYWNrdXAnKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgIH0sCgogICAgICAgIC8vIOuwseyXhSDqsJzsi5wg7ISx6rO1IOyLnAogICAgICAgIHN1Y2Nlc3NTdGFydGVkQmFja3VwKCkgewoKICAgICAgICAgICAgdGhpcy5vcGVuTGF5ZXIoJ3N1Y2Nlc3NTdGFydGVkQmFja3VwJyk7CiAgICAgICAgfQogICAgfSwKCiAgICBjcmVhdGVkKCkgewoKICAgICAgICBsZXQgcGFnZUxvYWRJbmZvID0gdGhpcy4kc3RvcmUuc3RhdGUubWFpbi5wYWdlTG9hZEluZm8sCiAgICAgICAgICAgIGtleXMgPSBPYmplY3Qua2V5cyhwYWdlTG9hZEluZm8pOwoKICAgICAgICBmb3IoIGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHsKCiAgICAgICAgICAgIHRoaXMucGFnZUluZm9ba2V5c1tpXV0gPSBwYWdlTG9hZEluZm9ba2V5c1tpXV07CiAgICAgICAgfQoKICAgICAgICB0aGlzLmdldExpc3QoKTsKICAgIH0KfQoK"},{"version":3,"sources":["Server.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAudA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA","file":"Server.vue","sourceRoot":"src/components/management/user_server","sourcesContent":["<template>\n    <div class=\"admin_list\">\n        <div class=\"board_search_edit\">\n            <fieldset class=\"search_form left\">\n                <legend>사용자검색</legend>\n                <p>\n                    <input type=\"text\" v-model=\"pageInfo.searchText\" @keydown.enter=\"getList(1)\"/>\n                    <button type=\"button\" @click=\"getList(1)\"><img src=\"@/assets/images/sub/btn_ae_search.png\" alt=\"검색\"/></button>\n                </p>\n            </fieldset>\n            <div class=\"btn_edit right\">\n                <button type=\"button\" @click=\"context.userAdd=true\" @mouseleave=\"context.userAdd=false\"><img\n                        src=\"@/assets/images/component/btn_edit_user_add.png\"\n                        alt=\"\" class=\"ico\"/><span\n                        class=\"txt\">사용자 추가</span>\n                </button>\n                <transition name=\"fade\">\n                    <div class=\"menu_layer top_menu_layer\" v-show=\"context.userAdd\" @mouseover=\"context.userAdd=true\" @mouseleave=\"context.userAdd=false\">\n                        <ul>\n                            <li><router-link to=\"/management/user_server/mail_invitation\">메일로 초대</router-link></li>\n                            <li><router-link to=\"/management/user_server/manual_invitation\">수동으로 추가</router-link></li>\n                            <li><router-link to=\"/management/user_server/csv_invitation\">CSV파일에서 일괄 추가</router-link></li>\n                        </ul>\n                    </div>\n                </transition>\n                <button type=\"button\" @click=\"context.detail=true\" @mouseleave=\"context.detail=false\" ><img src=\"@/assets/images/component/btn_edit_detail.png\" alt=\"\" class=\"ico\"/><span\n                        class=\"txt\">상세</span></button>\n                <transition name=\"fade\">\n                    <div class=\"menu_layer top_menu_layer\" id=\"menu_layer_detail\" v-show=\"context.detail\" @mouseover=\"context.detail=true\" @mouseleave=\"context.detail=false\">\n                        <ul>\n                            <li><a href=\"#\" @click=\"checkSelectedAndOpenLayer('activateServerLayer')\">서버 유효화</a></li>\n                            <li><a href=\"#\" @click=\"checkSelectedAndOpenLayer('pauseComputerLayer')\">서버 일시 정지</a></li>\n                            <li><a href=\"#\" @click=\"checkSelectedAndOpenLayer('archiveServerLayer')\">서버 아카이브</a></li>\n                            <li><a href=\"#\" @click=\"checkSelectedAndOpenLayer('deleteComputerLayer')\">서버 삭제</a></li>\n                            <li><a href=\"#\" @click=\"restrictLayer('gnrl')\">일반 스토리지 제한</a></li>\n                            <li><a href=\"#\" @click=\"restrictLayer('cold')\">콜드 스토리지 제한</a></li>\n                            <li><a href=\"#\" @click=\"restrictLayer('ocr')\">OCR 페이지 수 제한</a></li>\n                            <li><a href=\"#\" @click=\"downloadCSV\">CSV 내보내기</a></li>\n                        </ul>\n                    </div>\n                </transition>\n            </div>\n        </div>\n\n        <template v-if=\"list.length > 0\">\n            <table class=\"board_list\">\n                <caption>사용자 목록</caption>\n                <colgroup>\n                    <col style=\"width:70px\"/>\n                    <col style=\"width:*px\"/>\n                    <col style=\"width:120px\"/>\n                    <col style=\"width:140px\"/>\n                    <col style=\"width:220px\"/>\n                    <col style=\"width:220px\"/>\n                    <col style=\"width:180px\"/>\n                    <col style=\"width:65px\"/>\n                </colgroup>\n                <thead>\n                <tr>\n                    <th scope=\"col\"><input type=\"checkbox\" title=\"전체선택\" v-model=\"checkedAll\"/></th>\n                    <th scope=\"col\"><a href=\"javascript:void(0)\" class=\"sorting inactive\" @click=\"sortList\" data-sort=\"manager\">관리 사용자</a></th>\n                    <th scope=\"col\"><a href=\"javascript:void(0)\" class=\"sorting inactive\" @click=\"sortList\" data-sort=\"server\">서버 이름</a></th>\n                    <th scope=\"col\"><a href=\"javascript:void(0)\" class=\"sorting inactive\" @click=\"sortList\" data-sort=\"policy\">정책</a></th>\n                    <th scope=\"col\"><a href=\"javascript:void(0)\" class=\"sorting inactive\" @click=\"sortList\" data-sort=\"general\">일반 스토리지 사용량/최대</a></th>\n                    <th scope=\"col\"><a href=\"javascript:void(0)\" class=\"sorting inactive\" @click=\"sortList\" data-sort=\"cold\">콜드 스토리지 사용량/최대</a></th>\n                    <th scope=\"col\"><a href=\"javascript:void(0)\" class=\"sorting inactive\" @click=\"sortList\" data-sort=\"ocr\">OCR 사용량/최대</a></th>\n                    <th scope=\"col\">&nbsp;</th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr class=\"pointer\" v-for=\"item in list\" :key=\"item.id\">\n                    <td @click.stop><input type=\"checkbox\" title=\"선택\" v-model:cheked=\"item.checked\" /></td>\n                    <td class=\"left\">\n                        <img v-if=\"item.status == 1\" src=\"@/assets/images/sub/ico_ad_server_valid.png\" alt=\"컴퓨터\" class=\"ico_admin\"/>\n                        <img v-else-if=\"item.status == 2\" src=\"@/assets/images/sub/ico_ad_server_pause.png\" alt=\"컴퓨터\" class=\"ico_admin\"/>\n                        <a href=\"#\">{{item.user_fullname}}<img src=\"@/assets/images/sub/ico_cn_new.png\" alt=\"신규\" class=\"new\" v-show=\"item.new == 'Y'\"/></a></td>\n                    <td>{{item.name}}</td>\n                    <td>{{setPolicyName(item.policyname)}}</td>\n                    <td>{{expressUsed(item.gnrlsto)}} / {{expressLimit(item.gnrllimit)}}</td>\n                    <td>{{expressUsed(item.coldsto)}} / {{expressLimit(item.coldlimit)}}</td>\n                    <td>{{expressUsed(item.ocr, '페이지')}} / {{expressLimit(item.ocrlimit, '페이지')}}</td>\n                    <td class=\"item_edit\">\n                        <button type=\"button\" @click=\"showContext($event, item.id, true)\" @mouseleave=\"hideContext($event, item.id)\">\n                            <i class=\"more\">더 많은</i>\n                        </button>\n                        <transition name=\"fade\">\n                            <div class=\"menu_layer user_context\" v-show=\"item.context.show\" @mouseover=\"item.context.show=true\" @mouseleave=\"item.context.show=false\">\n                                <ul>\n                                    <li><a href=\"#\" @click=\"checkSelectedAndOpenLayer('activateServerLayer', item.id)\">서버 유효화</a></li>\n                                    <li><a href=\"#\" @click=\"checkSelectedAndOpenLayer('pauseComputerLayer', item.id)\">서버 일시 정지</a></li>\n                                    <li><a href=\"#\" @click=\"checkSelectedAndOpenLayer('archiveServerLayer', item.id)\">서버 아카이브</a></li>\n                                    <li><a href=\"#\" @click=\"checkSelectedAndOpenLayer('deleteComputerLayer', item.id)\">서버 삭제</a></li>\n                                    <li><a href=\"#\" @click=\"checkSelectedAndOpenLayer('changeServerNameLayer', item.id)\">서버 이름 변경</a></li>\n                                    <li><a href=\"#\" @click=\"checkSelectedAndOpenLayer('deletePolicyLayer', item.id)\">정책을 삭제</a></li>\n                                    <li><a href=\"#\" @click=\"checkSelectedAndOpenLayer('changePolicyLayer', item.id)\">정책을 수정</a></li>\n                                    <li><a href=\"#\" @click=\"restrictLayer('gnrl', item.id)\">일반 스토리지 제한</a></li>\n                                    <li><a href=\"#\" @click=\"restrictLayer('cold', item.id)\">콜드 스토리지 제한</a></li>\n                                    <li><a href=\"#\" @click=\"restrictLayer('ocr', item.id)\">OCR 페이지 수 제한</a></li>\n                                    <li><a href=\"#\" @click=\"getStartedBackup(item.id)\">백업 개시</a></li>\n                                </ul>\n                            </div>\n                        </transition>\n                    </td>\n                </tr>\n                </tbody>\n            </table>\n\n            <!-- 페이지 -->\n            <div class=\"page_navi\">\n              <a href=\"#\" class=\"guide prev\" @click=\"getList(prevPage)\">\n                <img src=\"@/assets/images/component/btn_page_prev.png\" alt=\"Prev\" class=\"ico\">\n              </a>\n              <template v-for=\"page in pageArr\">\n                  <a href=\"#\" class=\"num\" :class=\"{active: page.active}\" @click=\"getList(page.pageNo)\">{{ page.pageNo }}</a>\n              </template>\n              <a href=\"#\" class=\"guide next\" @click=\"getList(nextPage)\">\n                  <img src=\"@/assets/images/component/btn_page_next.png\" alt=\"Next\" class=\"ico\">\n              </a>\n            </div>\n        </template>\n\n        <div class=\"board_empty\" v-else>\n          <img src=\"@/assets/images/component/ico_admin_empty.png\" alt=\"\" class=\"ico\" />\n          <p>서버가 없습니다.</p>\n        </div>\n\n\n        <!-- 서버 선택 -->\n        <div class=\"layer_popup\" ref=\"noSelectedServerLayer\">\n            <h3>서버 선택</h3>\n            <div class=\"msg warning\">\n                <h4><img src=\"@/assets/images/component/ico_lp_admin_warning.png\" alt=\"서버 선택\" /></h4>\n                <p>\n                    <strong>서버를 선택하세요.</strong>\n                </p>\n            </div>\n\n            <div class=\"btn_set\">\n                <div class=\"center\">\n                    <button type=\"button\" class=\"btn_basic submit\" @click=\"closeLayer\">확인</button>\n                </div>\n            </div>\n            <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n        </div>\n\n        <!-- 서버 유효화 - 이미 유효화 -->\n        <div class=\"layer_popup\" ref=\"alreadyActivatedComputerLayer\">\n            <h3>서버 유효화</h3>\n            <div class=\"msg warning\">\n                <h4><img src=\"@/assets/images/component/ico_lp_warning.png\" alt=\"서버 유효화\" /></h4>\n                <p>\n                    <strong>이미 유효화 되고 있습니다.</strong>\n                </p>\n            </div>\n\n            <div class=\"btn_set\">\n                <div class=\"right\">\n                    <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">취소</button>\n                </div>\n            </div>\n            <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n        </div>\n\n        <!-- 서버 유효화 -->\n        <div class=\"layer_popup\" ref=\"activateServerLayer\">\n            <h3>서버 유효화</h3>\n            <div class=\"msg success\">\n                <h4><img src=\"@/assets/images/component/ico_lp_success.png\" alt=\"서버 유효화\" /></h4>\n                <p>\n                    <strong>선택한 항목을 활성화 해도 되겠습니까?</strong>\n                </p>\n            </div>\n\n            <div class=\"btn_set\">\n                <div class=\"right\">\n                    <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">취소</button>\n                    <button type=\"button\" class=\"btn_basic submit\" @click=\"changeStorage('status', 'activate')\">확인</button>\n                </div>\n            </div>\n            <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n        </div>\n\n        <!-- 서버 일시 정지 -->\n        <div class=\"layer_popup\" ref=\"pauseComputerLayer\">\n            <h3>서버 일시 정지</h3>\n            <div class=\"msg warning\">\n                <h4><img src=\"@/assets/images/component/ico_lp_warning.png\" alt=\"서버 일시 정지\" /></h4>\n                <p>\n                    <strong>선택한 항목을 일시정지 해도 되겠습니까?</strong>\n                </p>\n            </div>\n\n            <div class=\"btn_set\">\n                <div class=\"right\">\n                    <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">취소</button>\n                    <button type=\"button\" class=\"btn_basic submit\" @click=\"changeStorage('status', 'pause')\">확인</button>\n                </div>\n            </div>\n            <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n        </div>\n\n        <!-- 서버 아카이브 -->\n        <div class=\"layer_popup\" ref=\"archiveServerLayer\">\n            <h3>서버 아카이브</h3>\n            <div class=\"msg warning\">\n                <h4><img src=\"@/assets/images/component/ico_lp_warning.png\" alt=\"서버 아카이브\" /></h4>\n                <p>\n                    <strong>경고!</strong><br />\n                    서버를 보존하면 이 컴퓨터의 백업은 정지되고 재개할 수 없게 됩니다.<br />\n                    진행하시겠습니까?\n                </p>\n            </div>\n\n            <div class=\"btn_set\">\n                <div class=\"right\">\n                    <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">취소</button>\n                    <button type=\"button\" class=\"btn_basic submit\" @click=\"changeStorage('status', 'archive')\">확인</button>\n                </div>\n            </div>\n            <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n        </div>\n\n        <!-- 서버 삭제 -->\n        <div class=\"layer_popup\" ref=\"deleteComputerLayer\">\n            <h3>서버 삭제</h3>\n            <div class=\"msg warning\">\n                <h4><img src=\"@/assets/images/component/ico_lp_warning.png\" alt=\"컴퓨터 삭제\" /></h4>\n                <p>\n                    <strong>서버를 삭제합니다.</strong><br />\n                    선택한 단말을 제거하면 그 정보와 파일은<br />\n                    AOSBOX AI plus부터 영구적으로 삭제되고<br />\n                    두번 다시 접속할 수 없게 됩니다.<br />\n                    진행하시겠습니까?\n                </p>\n            </div>\n\n            <div class=\"btn_set\">\n                <div class=\"right\">\n                    <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">취소</button>\n                    <button type=\"button\" class=\"btn_basic submit\" @click=\"changeStorage('status', 'delete')\">확인</button>\n                </div>\n            </div>\n            <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n        </div>\n\n        <!-- 서버 이름 변경 -->\n        <div class=\"layer_popup\" ref=\"changeServerNameLayer\">\n            <h3>서버 이름 변경</h3>\n            <fieldset class=\"write_form\">\n                <legend>서버 이름 변경</legend>\n                <p>\n                    <span class=\"category\">\n                        <label for=\"serverNameChange\">이름</label>\n                    </span>\n                    <span class=\"field\">\n                        <input type=\"text\" id=\"serverNameChange\" v-model=\"layer.value.name\"/>\n                    </span>\n                </p>\n            </fieldset>\n\n            <div class=\"btn_set\">\n                <div class=\"right\">\n                    <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">취소</button>\n                    <button type=\"button\" class=\"btn_basic submit\" @click=\"changeStorage('name')\">확인</button>\n                </div>\n            </div>\n            <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n        </div>\n\n        <!-- 정책 삭제 -->\n        <div class=\"layer_popup\" ref=\"deletePolicyLayer\">\n            <h3>정책 삭제</h3>\n            <div class=\"msg warning\">\n                <h4><img src=\"@/assets/images/component/ico_lp_admin_warning.png\" alt=\"정책 삭제\" /></h4>\n                <p>\n                    <strong>정책을 삭제합니다.</strong><br />\n                    정책을 삭제하면 이 정책을 배정 받던 유저는 자신이 백업한 데이터의<br />\n                    정책을 다시 선택할 필요가 있습니다. 진행하시겠습니까?\n                </p>\n            </div>\n\n            <div class=\"btn_set\">\n                <div class=\"right\">\n                    <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">취소</button>\n                    <button type=\"button\" class=\"btn_basic submit\" @click=\"changeStorage('policy', 'delete')\">확인</button>\n                </div>\n            </div>\n            <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n        </div>\n\n        <!-- 정책 삭제 - 삭제할 정책이 없을 때 -->\n        <div class=\"layer_popup\" ref=\"noPolicyToDeleteLayer\">\n            <h3>정책 삭제</h3>\n            <div class=\"msg warning\">\n                <h4><img src=\"@/assets/images/component/ico_lp_admin_warning.png\" alt=\"정책 삭제\" /></h4>\n                <p><strong>삭제할 정책이 없습니다.</strong></p>\n            </div>\n\n            <div class=\"btn_set\">\n                <div class=\"center\">\n                    <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">확인</button>\n                </div>\n            </div>\n            <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n        </div>\n\n        <!-- 정책 수정 -->\n        <div class=\"layer_popup\" ref=\"changePolicyLayer\">\n            <h3>정책 수정</h3>\n            <fieldset class=\"write_form\">\n                <legend>정책 수정</legend>\n                <p>\n                    <span class=\"category\">\n                        <label for=\"modifyPolicy_server\">할당 정책을 선택합니다.</label>\n                    </span>\n                    <span class=\"field\">\n                        <span class=\"basic_select selectbox_ui\">\n                            <b class=\"selected_txt\"></b>\n                            <select id=\"modifyPolicy_server\" v-model=\"layer.value.policyId\">\n                                <option value=\"0\">사용자 정의</option>\n                                <option v-for=\"policy in layer.value.policyList\" :value=\"policy.bp_id\" selected>{{policy.bp_name}}</option>\n                            </select>\n                        </span>\n                    </span>\n                </p>\n            </fieldset>\n\n            <div class=\"btn_set\">\n                <div class=\"right\">\n                    <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">취소</button>\n                    <button type=\"button\" class=\"btn_basic submit\" @click=\"changeStorage('policy', layer.value.policyId)\">확인</button>\n                </div>\n            </div>\n            <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n        </div>\n\n        <!-- 일반 스토리지 제한 -->\n        <div class=\"layer_popup\" ref=\"restrictGeneralStorageLayer\">\n            <h3>일반 스토리지 제한</h3>\n            <fieldset class=\"range_form\">\n                <legend>일반 스토리지 제한</legend>\n                <p>\n                    <span class=\"category\"><label for=\"normalStorageLimit\">일반 스토리지 제한</label></span>\n                    <span class=\"field size\">\n                        <input type=\"text\" id=\"normalStorageLimit\" v-model.number=\"layer.value.gnrllimit\" :disabled=\"layer.checked.restrictGeneralStorageLayer\"/> GB\n                        <label class=\"check_option\"><input type=\"checkbox\" v-model:checked=\"layer.checked.restrictGeneralStorageLayer\" @click=\"unlimit('gnrllimit')\"/>무제한</label>\n                    </span>\n                </p>\n            </fieldset>\n\n            <div class=\"btn_set\">\n                <div class=\"right\">\n                    <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">취소</button>\n                    <button type=\"button\" class=\"btn_basic submit\" @click=\"changeStorage('gnrllimit')\">확인</button>\n                </div>\n            </div>\n            <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n        </div>\n\n        <!-- 콜드 스토리지 제한 -->\n        <div class=\"layer_popup\" ref=\"restrictColdStorageLayer\">\n            <h3>콜드 스토리지 제한</h3>\n            <fieldset class=\"range_form\">\n                <legend>콜드 스토리지 제한</legend>\n                <p>\n                    <span class=\"category\"><label for=\"coldStorageLimit\">콜드 스토리지 제한</label></span>\n                    <span class=\"field size\">\n                        <input type=\"text\" id=\"coldStorageLimit\" v-model.number=\"layer.value.coldlimit\" :disabled=\"layer.checked.restrictColdStorageLayer\"/> GB\n                        <label class=\"check_option\"><input type=\"checkbox\" v-model:checked=\"layer.checked.restrictColdStorageLayer\" @click=\"unlimit('coldlimit')\" />무제한</label>\n                    </span>\n                </p>\n            </fieldset>\n\n            <div class=\"btn_set\">\n                <div class=\"right\">\n                    <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">취소</button>\n                    <button type=\"button\" class=\"btn_basic submit\" @click=\"changeStorage('coldlimit')\">확인</button>\n                </div>\n            </div>\n            <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n        </div>\n\n        <!-- OCR 페이지 수 제한 -->\n        <div class=\"layer_popup\" ref=\"restrictOcrPageLayer\">\n            <h3>OCR 페이지 수 제한</h3>\n            <fieldset class=\"range_form\">\n                <legend>OCR 페이지 수 제한</legend>\n                <p>\n                    <span class=\"category\"><label for=\"ocrPageLimit\">OCR 페이지 수 제한</label></span>\n                    <span class=\"field size\">\n                        <input type=\"text\" id=\"ocrPageLimit\" v-model.number=\"layer.value.ocrlimit\" :disabled=\"layer.checked.restrictOcrPageLayer\" /> 페이지\n                        <label class=\"check_option\"><input type=\"checkbox\" v-model:checked=\"layer.checked.restrictOcrPageLayer\" @click=\"unlimit('ocrlimit')\" />무제한</label>\n                    </span>\n                </p>\n            </fieldset>\n\n            <div class=\"btn_set\">\n                <div class=\"right\">\n                    <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">취소</button>\n                    <button type=\"button\" class=\"btn_basic submit\" @click=\"changeStorage('ocrlimit')\">확인</button>\n                </div>\n            </div>\n            <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n        </div>\n\n        <!-- 백업 게시 -->\n        <div class=\"layer_popup\" ref=\"backupLayer\">\n            <h3>백업 게시</h3>\n            <div class=\"msg warning\">\n                <h4><img src=\"@/assets/images/component/ico_lp_warning.png\" alt=\"백업 게시\" /></h4>\n                <p>\n                    <strong>이 단말기의 백업을 시작해도 될까요?</strong><br />\n                    이 과정은 시작하기까지 최대 15분 걸리는 경우가 있습니다.\n                </p>\n            </div>\n\n            <div class=\"btn_set\">\n                <div class=\"right\">\n                    <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">취소</button>\n                    <button type=\"button\" class=\"btn_basic submit\" @click=\"changeStorage('backup', '', successStartedBackup)\">확인</button>\n                </div>\n            </div>\n            <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n        </div>\n\n        <!-- 이미 백업 진행 중 -->\n        <div class=\"layer_popup\" ref=\"alreadyStartedBackup\">\n            <h3>백업 게시</h3>\n            <div class=\"msg warning\">\n                <h4><img src=\"@/assets/images/component/ico_lp_warning.png\" alt=\"백업 게시\" /></h4>\n                <p>\n                    <strong>이 단말기의 백업은 이미 진행 중입니다.</strong><br />\n                    이 과정은 시작하기까지 최대 15분 걸리는 경우가 있습니다.\n                </p>\n            </div>\n\n            <div class=\"btn_set\">\n                <div class=\"right\">\n                    <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">확인</button>\n                </div>\n            </div>\n            <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n        </div>\n\n        <!-- 백업 게시 성공 -->\n        <div class=\"layer_popup\" ref=\"successStartedBackup\">\n            <h3>백업 게시</h3>\n            <div class=\"msg warning\">\n                <h4><img src=\"@/assets/images/component/ico_lp_warning.png\" alt=\"백업 게시\" /></h4>\n                <p>\n                    <strong>성공</strong><br />\n                    이 단말기에서 백업은 15분 이내에 개시됩니다.\n                </p>\n            </div>\n\n            <div class=\"btn_set\">\n                <div class=\"right\">\n                    <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">확인</button>\n                </div>\n            </div>\n            <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n        </div>\n\n        <!-- 모달 배경 -->\n        <div class=\"modal_bg\" ref=\"modal\"></div>\n    </div>\n\n\n</template>\n\n<script>\nimport {commonMethodsMixin} from '../../../common/commonMethodsMixin'\nimport {listAndPageMixin} from '../../../common/listAndPageMixin'\n\nexport default {\n    name: \"Server\",\n    mixins: [commonMethodsMixin, listAndPageMixin],\n    data() {\n        return {\n            context: {\n              userAdd : false,\n              detail: false\n            },\n            layer: {\n                checked: {\n                    restrictGeneralStorageLayer: false, // 일반 스토리지 제한\n                    restrictColdStorageLayer: false,    // 콜드 스토리지 제한\n                    restrictOcrPageLayer: false,        // OCR 페이지 수 제한\n                },\n                value: {\n                    gnrllimit: 0,\n                    coldlimit: 0,\n                    ocrlimit: 0,\n                    name: '',\n                    policyList: [],\n                    policyId: 0\n                },\n                selecteid: []              // 선택된 id\n            },\n        }\n    },\n    methods: {\n\n        setPolicyName(policyname) {\n\n            return policyname ? policyname : '사용자 정의';\n        },\n\n        showContext(event, id, adjustPosition) {\n\n            let $target = $(event.target)[0].nodeName === 'I' ? $(event.target).closest('button') : $(event.target),\n                $td = $target.closest('td'),\n                $context = $td.find('.menu_layer.user_context'),\n                top,\n                left;\n\n            event.stopPropagation();\n\n            let list = this.list;\n\n            for (let i = 0; i < list.length; i++) {\n\n                if (list[i].id == id) {\n\n                    list[i].context.show = true;\n                }\n            }\n\n            if (adjustPosition) {\n\n                top = $target.offset().top,\n                left = $target.offset().left + 2 - $context.outerWidth();\n                $context.css(\"top\", top + \"px\").css(\"left\", left + \"px\");\n            }\n        },\n        hideContext(event, id, subName) {\n\n            event.stopPropagation();\n\n            let list = this.list;\n\n            for (let i = 0; i < list.length; i++) {\n\n                if (list[i].id == id) {\n\n                    if (subName === undefined)\n                        list[i].context.show = false;\n                    else\n                        list[i].context[subName].show = false;\n                }\n            }\n\n        },\n\n         // 선택된 유저 정보\n        getSelecteids() {\n\n            let selecteids = [],\n                list = this.list,\n                data,\n                i;\n\n            for (i = 0; i < list.length; i++) {\n\n                data = list[i];\n\n                if (data.checked)\n                    selecteids.push(data.id);\n            }\n\n            this.layer.selecteid = selecteids;\n\n            return selecteids;\n        },\n\n        checkSelecteid(selecteids) {\n\n            if (selecteids.length == 0) {\n\n                this.openLayer('noSelectedServerLayer');\n                return false;\n            }\n\n            return true;\n        },\n\n        checkSelectedAndOpenLayer(layerName, id) {\n\n            let ids = [id],\n                list = this.list,\n                alreadyActive = false;\n\n            if (!id)\n                ids = this.getSelecteids();\n\n            // 선택여부 검사\n            if (!this.checkSelecteid(ids)) return;\n\n            // 서버 유효화\n            if (layerName === 'activateServerLayer') {\n\n                if (this.checkAlreadyActive(ids)) return;\n\n            // 서버 아카이브\n            } else if (layerName === 'archiveServerLayer') {\n\n            // 서버 이름변경\n            } else if (layerName === 'changeServerNameLayer') {\n\n                this.setStorageNameOnLayer(id);\n\n            // 정책 삭제\n            } else if (layerName === 'deletePolicyLayer') {\n\n                for (let i = 0; i < this.list.length; i++) {\n\n                    if (this.list[i].id == id) {\n\n                        if (!this.list[i].policyid) {\n\n                            this.openLayer('noPolicyToDeleteLayer');\n                            return;\n                        }\n                    }\n                }\n\n            // 정책 수정\n            } else if (layerName === 'changePolicyLayer') {\n\n                let policyId;\n\n                for (let i = 0; i < this.list.length; i++) {\n\n                    if (id === this.list[i].id)\n                        policyId = this.list[i].policyid ? this.list[i].policyid : 0;\n                }\n\n                axios.post(\"/management/getPolicyList/\").then(response => {\n\n                    let data = response.data;\n\n                    if (data.code === 1000) {\n\n                        this.layer.value.policyList = data.policyList;\n\n                        this.layer.value.policyId = policyId;\n\n                        setTimeout( function () {\n                            initSelectBox($('#modifyPolicy_server').parent(\".selectbox_ui\"));\n                        }, 100);\n                    }\n\n                }).catch(ex => {\n\n                    console.log(ex);\n                });\n            }\n\n            this.openLayer(layerName);\n            this.layer.selecteid = ids;\n        },\n\n        setStorageNameOnLayer(id) {\n\n            let list = this.list,\n                i;\n\n            for (i = 0; i < list.length; i++) {\n\n                if (list[i].id == id) {\n\n                    this.layer.value.name = list[i].name;\n                }\n            }\n        },\n\n        checkAlreadyActive(ids) {\n\n            let list = this.list,\n                alreadyActive = false,\n                i,\n                j;\n\n            // 이미 유효화 검사\n            for (i = 0; i < list.length; i++) {\n\n                for (j = 0; j < ids.length; j++) {\n\n                    if (list[i].id == ids[j] && list[i].status === 1) {\n                        alreadyActive = true;\n                        break;\n                    }\n                }\n            }\n\n            if (alreadyActive)\n                this.openLayer('alreadyActivatedComputerLayer');\n\n            return alreadyActive;\n        },\n\n        // 레이어 팝업 보이기\n        openLayer(layerName, id) {\n\n            $(this.$refs.modal).show();\n            $(this.$refs[layerName]).show();\n\n            if (id)\n                this.layer.selecteid = id;\n        },\n\n        // 레이어 팝업 숨기기\n        closeLayer() {\n\n            $(this.$refs.modal).hide();\n            $(\".layer_popup\").hide();\n        },\n\n        unlimit(valueName) {\n\n           this.layer.value[valueName] = '';\n        },\n\n        // 일반 스토리지 제한, 콜드 스토리지 제한, ORC 페이지 제한 버튼 클릭 시, 레이어 팝업\n        restrictLayer(layerType, id) {\n\n            let ids = [id],\n                layerName = '',\n                limitName = '',\n                size = '',\n                check = false;\n\n            switch(layerType) {\n                case 'gnrl':\n                    layerName = 'restrictGeneralStorageLayer';\n                    limitName = 'gnrllimit';\n                    break;\n\n                case 'cold':\n                    layerName = 'restrictColdStorageLayer';\n                    limitName = 'coldlimit';\n                    break;\n\n                case 'ocr':\n                    layerName = 'restrictOcrPageLayer';\n                    limitName = 'ocrlimit';\n                    break;\n            }\n\n            $(this.$refs[layerName]).find(\"input\").css(\"border-color\", \"#CCCCCC\");\n\n            if (id === undefined) {\n\n                ids = this.getSelecteids();\n\n            } else {\n\n                for (let i = 0; i < this.list.length; i++) {\n\n                    if (this.list[i].id == id) {\n\n                        size = this.list[i][limitName];\n                        check = size === '' ? true : false;\n                    }\n                }\n            }\n\n            this.layer.value[limitName] = size;\n            this.layer.checked[layerName] = check;\n\n            // 유저 선택여부 검사\n            if (!this.checkSelecteid(ids)) return;\n\n            this.openLayer(layerName);\n            this.layer.selecteid = ids;\n        },\n\n        getList(pageNo) {\n\n            const self = this;\n\n            if (pageNo !== undefined)\n                this.pageInfo.currentPage = pageNo;\n\n            this.setPageLoadInfo();\n\n            axios.post(\"/management/user_server/list/Server/\", {\n                searchText: this.pageInfo.searchText,\n                currentPage: this.pageInfo.currentPage,\n                dataPerPage: this.pageInfo.dataPerPage,\n                orderName : this.pageInfo.orderName,\n                orderType : this.pageInfo.orderType\n            }).then(response => {\n\n                let data = response.data;\n\n                if (data.code == 1000) {\n\n                    let list = data.list,\n                        totalListCount = data.totalListCount,\n                        haveNew = response.data.haveNew,\n                        tempList = [];\n\n                    this.pageInfo.totalData = totalListCount;\n\n                    self.$emit('setHaveNew', 'Server', haveNew);\n\n                    for (let i = 0; i < list.length; i++) {\n\n                        let data = list[i];\n                        let obj = {};\n\n                        for (let prop in data) {\n\n                            let newPropName = prop.replace('bs_', '');\n\n                            obj[newPropName] = data[prop];\n\n                            switch(prop) {\n                                case 'bs_gnrllimit':\n                                case 'bs_coldlimit':\n                                case 'bs_ocrlimit':\n                                    if (data[prop] == 0)\n                                        obj[newPropName] = '';\n                                    break;\n\n                                default:\n                                    // do nothing\n                            }\n                        }\n\n                        obj.id = list[i].bs_id;\n                        obj.checked = false;\n                        obj.context = {\n                            show: false\n                        };\n\n                        tempList.push(obj);\n                    }\n\n                    self.list = tempList;\n                }\n            }).catch(ex => {\n\n                console.log(ex);\n            });\n        },\n\n        setPageLoadInfo() {\n\n            let payload = {\n                currentPage: this.pageInfo.currentPage,\n                searchText: this.pageInfo.searchText,\n            };\n\n            this.$store.dispatch('main/setPageLoadInfo', payload);\n        },\n\n        changeStorage(prop, value, func) {\n\n            let self = this,\n                selecteid = this.layer.selecteid,\n                $targetInput,\n                layerName,\n                unlimitChecked; // 무제한 체크 여부\n\n            switch (prop) {\n\n                case 'name':\n                case 'gnrllimit':\n                case 'coldlimit':\n                case 'ocrlimit':\n                    value = this.layer.value[prop];\n                    break;\n            }\n\n            if (prop == 'gnrllimit' || prop == 'coldlimit' || prop == 'ocrlimit') {\n\n                if (prop == 'gnrllimit')\n                    layerName = 'restrictGeneralStorageLayer';\n                else if (prop == 'coldlimit')\n                    layerName = 'restrictColdStorageLayer';\n                else if (prop == 'ocrlimit')\n                    layerName = 'restrictOcrPageLayer';\n\n                $targetInput = $(this.$refs[layerName]).find('input');\n                unlimitChecked = this.layer.checked[layerName];\n\n                if ((value !== '' && value <= 0) || (value === '' && !unlimitChecked)) {\n\n                    $targetInput.css(\"border-color\", \"red\");\n                    return false;\n                }\n            }\n\n            axios.post('/management/changeUserStorage/', {\n                storageIds : selecteid,\n                prop: prop,\n                value: value\n            }).then(response => {\n\n                let data = response.data;\n\n                if (data.code == 1000) {\n\n                    self.closeLayer();\n                    self.getList();\n\n                    if (func) func();\n                }\n\n            }).catch(ex => {\n\n                console.log(ex);\n            });\n        },\n\n        downloadCSV() {\n\n            axios.post(\"/management/downloadCSV/list/Server/\", {\n                searchText: this.pageInfo.searchText,\n                currentPage: this.pageInfo.currentPage,\n                dataPerPage: this.pageInfo.dataPerPage,\n                orderName : this.pageInfo.orderName,\n                orderType : this.pageInfo.orderType\n            }).then(response => {\n\n                if(response.data.size < 1){\n                    alert(\"Can not download\");\n                    return;\n                }\n\n                let blob = new Blob(['\\ufeff' + response.data], {type: response.headers['content-type']});\n                let link = document.createElement('a');\n                link.href = window.URL.createObjectURL(blob);\n                link.download = 'serverList.csv';\n                link.click();\n\n            }).catch(ex => {\n\n                console.log(ex);\n            });\n        },\n\n        // 목록 정렬\n        sortList(event) {\n\n            let $target = $(event.target),\n                orderType = $target.data('sort'),\n                $sortings = $(\"a.sorting\");\n\n            // 나머지 비활성화\n            $sortings.each(function () {\n\n                if ($(this)[0] != $target[0]) {\n\n                    $(this).addClass('inactive').removeClass('on');\n                }\n            });\n\n\n            if ($target.hasClass('inactive')) {\n\n                // 해당 항목 활성화\n                $target.removeClass('inactive');\n                $target.addClass('on');\n\n            } else {\n\n                if ($target.hasClass('on')) {\n\n                    $target.removeClass('on');\n\n                } else {\n\n                    $target.addClass('inactive');\n                }\n            }\n\n            this.setSort();\n            this.getList();\n        },\n\n        setSort() {\n\n            let orderName = '',\n                orderType = '';\n\n            $(\"a.sorting\").each(function () {\n\n                if ($(this).hasClass(\"inactive\")) {\n\n                    // do nothing\n\n                } else {\n\n                    orderName = $(this).data(\"sort\");\n                    orderType = $(this).hasClass('on') ? 'asc' : 'desc';\n                }\n            });\n\n            this.pageInfo.orderName = orderName;\n            this.pageInfo.orderType = orderType;\n        },\n\n        // 백업 개시 버튼 클릭 시\n        getStartedBackup(id) {\n\n            let backup;\n\n            for (let i = 0; i < this.list.length; i++) {\n\n                if (id == this.list[i].id) {\n\n                    backup = this.list[i].backup;\n                }\n            }\n\n            if (backup === 0 || backup === 1) {\n\n                this.checkSelectedAndOpenLayer('backupLayer', id);\n                return;\n\n            } else if (backup === 2) {\n\n                this.openLayer('alreadyStartedBackup');\n                return;\n            }\n        },\n\n        // 백업 개시 성공 시\n        successStartedBackup() {\n\n            this.openLayer('successStartedBackup');\n        }\n    },\n\n    created() {\n\n        let pageLoadInfo = this.$store.state.main.pageLoadInfo,\n            keys = Object.keys(pageLoadInfo);\n\n        for( let i = 0; i < keys.length; i++) {\n\n            this.pageInfo[keys[i]] = pageLoadInfo[keys[i]];\n        }\n\n        this.getList();\n    }\n}\n\n</script>\n\n<style scoped>\n.fade-enter-active, .fade-leave-active {\n    transition: opacity 0.5s;\n}\n\n.fade-enter, .fade-leave-active {\n    opacity: 0;\n}\n\n.menu_layer {\n  display: block;\n}\n#menu_layer_detail {\n    right: 10px;\n}\n.menu_layer.user_context {\n    position: fixed;\n}\n.top_menu_layer {\n    top: 33px;\n}\n</style>\n"]}]}