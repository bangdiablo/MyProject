{"remainingRequest":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/src/components/management/user_server/User.vue?vue&type=style&index=0&id=1c1753af&scoped=true&lang=css&","dependencies":[{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/src/components/management/user_server/User.vue","mtime":1583135289883},{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5mYWRlLWVudGVyLWFjdGl2ZSwgLmZhZGUtbGVhdmUtYWN0aXZlIHsKICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC41czsKfQoKLmZhZGUtZW50ZXIsIC5mYWRlLWxlYXZlLWFjdGl2ZSB7CiAgICBvcGFjaXR5OiAwOwp9CgoubWVudV9sYXllciB7CiAgZGlzcGxheTogYmxvY2s7Cn0KCiNtZW51X2xheWVyX2RldGFpbCB7CiAgICByaWdodDogMTBweDsKfQoubWVudV9sYXllci51c2VyX2NvbnRleHQsIC5tZW51X2xheWVyLnVzZXIsIC5tZW51X2xheWVyLnBvbGljeSwgLm1lbnVfbGF5ZXIucmVzdHJpY3R7CiAgICBwb3NpdGlvbjogZml4ZWQ7Cn0KCiAgLyoudXNlcl9jb250ZXh0IHsqLwogIC8qICByaWdodDogNDdweDsqLwogIC8qfSovCiAgLnVzZXJfY29udGV4dF91c2VyX21hbmFnZW1lbnQgewogICAgdG9wOiAtMXB4OwogICAgbGVmdDogLTEzMnB4OwogIH0KICAudXNlcl9jb250ZXh0X3BvbGljeV9tYW5hZ2VtZW50IHsKICAgIHRvcDogMzBweDsKICAgIGxlZnQ6IC04OXB4OwogIH0KICAudXNlcl9jb250ZXh0X3VzZXJfbGltaXQgewogICAgdG9wOiA2MnB4OwogICAgbGVmdDogLTE0OXB4OwogIH0KICAubGF5ZXJfcG9wdXA+aDMgewogICAgcG9zaXRpb246IHJlbGF0aXZlICFpbXBvcnRhbnQ7CiAgICB6LWluZGV4OiAyOwogICAgY29sb3I6ICMxMzZCQjU7CiAgICBmb250LXNpemU6IDIwcHggIWltcG9ydGFudDsKICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7CiAgICBsaW5lLWhlaWdodDogMTIwJTsKICAgIHBhZGRpbmc6IDJweCAwcHggMHB4IDE0cHg7CiAgICBtYXJnaW4tYm90dG9tOiA0NXB4ICFpbXBvcnRhbnQ7Cn0KLnRvcF9tZW51X2xheWVyIHsKICAgIHRvcDogMzNweDsKfQo="},{"version":3,"sources":["User.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAu6CA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"User.vue","sourceRoot":"src/components/management/user_server","sourcesContent":["<template>\n  <div class=\"admin_list\">\n    <div class=\"board_search_edit\">\n      <fieldset class=\"search_form left\">\n        <legend>사용자검색</legend>\n        <p><input type=\"text\" v-model=\"pageInfo.searchText\" @keydown.enter=\"getUserList(1)\"/>\n          <button type=\"button\" @click=\"getUserList(1)\"><img src=\"@/assets/images/sub/btn_ae_search.png\" alt=\"검색\"/></button>\n        </p>\n      </fieldset>\n      <div class=\"btn_edit right\">\n        <button type=\"button\" @click=\"context.userAdd=true\" @mouseleave=\"context.userAdd=false\"><img\n          src=\"@/assets/images/component/btn_edit_user_add.png\"\n          alt=\"\" class=\"ico\"/><span\n          class=\"txt\">사용자 추가</span>\n        </button>\n        <transition name=\"fade\">\n            <div class=\"menu_layer top_menu_layer\" v-show=\"context.userAdd\" @mouseover=\"context.userAdd=true\" @mouseleave=\"context.userAdd=false\">\n            <ul>\n              <li><router-link to=\"/management/user_server/mail_invitation\">메일로 초대</router-link></li>\n              <li><router-link to=\"/management/user_server/manual_invitation\">수동으로 추가</router-link></li>\n              <li><router-link to=\"/management/user_server/csv_invitation\">CSV파일에서 일괄 추가</router-link></li>\n            </ul>\n          </div>\n        </transition>\n        <button type=\"button\" @click=\"context.detail=true\" @mouseleave=\"context.detail=false\" ><img src=\"@/assets/images/component/btn_edit_detail.png\" alt=\"\" class=\"ico\"/><span\n          class=\"txt\">상세</span></button>\n        <transition name=\"fade\">\n          <div class=\"menu_layer top_menu_layer\" id=\"menu_layer_detail\" v-show=\"context.detail\" @mouseover=\"context.detail=true\" @mouseleave=\"context.detail=false\">\n            <ul>\n              <li><a href=\"#\" @click=\"makeActiveUserLayer\">유저를 유효화</a></li>\n              <li><a href=\"#\" @click=\"makeInactiveUserLayer\">유저 일시 정지</a></li>\n              <li><a href=\"#\" @click=\"deleteUserLayer\">유저 삭제</a></li>\n              <li><a href=\"#\" @click=\"restrictLayer('gnrl')\">일반 스토리지 제한</a></li>\n              <li><a href=\"#\" @click=\"restrictLayer('cold')\">콜드 스토리지 제한</a></li>\n              <li><a href=\"#\" @click=\"restrictLayer('ocr')\">OCR 페이지 수 제한</a></li>\n              <li><a href=\"#\" @click=\"downloadCSV\">CSV 내보내기</a></li>\n            </ul>\n          </div>\n        </transition>\n      </div>\n    </div>\n    <template v-if=\"list.length > 0\">\n\n      <!-- list -->\n      <table class=\"board_list\" @keydown.esc=\"closeLayer\">\n        <caption>사용자 목록</caption>\n        <colgroup>\n          <col style=\"width:70px\"/>\n          <col style=\"width:*px\"/>\n          <col style=\"width:150px\"/>\n          <col style=\"width:240px\"/>\n          <col style=\"width:240px\"/>\n          <col style=\"width:200px\"/>\n          <col style=\"width:100px\"/>\n          <col style=\"width:65px\"/>\n        </colgroup>\n        <thead>\n        <tr>\n          <th scope=\"col\"><input type=\"checkbox\" title=\"전체선택\" v-model=\"checkedAll\"/></th>\n          <th scope=\"col\"><a href=\"javascript:void(0)\" class=\"sorting inactive\" @click=\"sortList\" data-sort=\"name\">이름</a></th>\n          <th scope=\"col\"><a href=\"javascript:void(0)\" class=\"sorting inactive\" @click=\"sortList\" data-sort=\"policy\">정책</a></th>\n          <th scope=\"col\"><a href=\"javascript:void(0)\" class=\"sorting inactive\" @click=\"sortList\" data-sort=\"general\">일반 스토리지 사용량/최대</a></th>\n          <th scope=\"col\"><a href=\"javascript:void(0)\" class=\"sorting inactive\" @click=\"sortList\" data-sort=\"cold\">콜드 스토리지 사용량/최대</a></th>\n          <th scope=\"col\"><a href=\"javascript:void(0)\" class=\"sorting inactive\" @click=\"sortList\" data-sort=\"ocr\">OCR 사용량/최대</a></th>\n          <th scope=\"col\"><a href=\"javascript:void(0)\" class=\"sorting inactive\" @click=\"sortList\" data-sort=\"kind\">종류</a></th>\n          <th scope=\"col\">&nbsp;</th>\n        </tr>\n        </thead>\n        <tbody>\n          <tr class=\"pointer\" v-for=\"item in list\" :key=\"item.id\" @click=\"goUserInfo(item.id)\">\n            <td @click.stop><input type=\"checkbox\" title=\"선택\" v-model:cheked=\"item.checked\" /></td>\n            <td class=\"left\">\n              <img v-if=\"isAdmin(item.admin_yn)\" src=\"@/assets/images/sub/ico_ad_admin.png\" alt=\"관리자\" class=\"ico_admin\"/>\n              <a href=\"#\">{{item.fullname}}<img src=\"@/assets/images/sub/ico_cn_new.png\" alt=\"신규\" class=\"new\" v-show=\"item.new == 'Y'\"/></a>\n            </td>\n            <td>{{setPolicyName(item.policyname)}}</td>\n            <td>{{expressUsed(item.gnrlsto)}} / {{expressLimit(item.gnrllimit)}}</td>\n            <td>{{expressUsed(item.coldsto)}} / {{expressLimit(item.coldlimit)}}</td>\n            <td>{{expressUsed(item.ocr, '페이지')}} / {{expressLimit(item.ocrlimit, '페이지')}}</td>\n            <td>{{item.permitname}}</td>\n            <td class=\"item_edit\">\n              <button type=\"button\" @click=\"showContext($event, item.id, true)\" @mouseleave=\"hideContext($event, item.id)\">\n                <i class=\"more\">더 많은</i>\n              </button>\n                <div class=\"menu_layer user_context\" v-show=\"item.userContext.show\" @mouseenter=\"showContext($event, item.id)\" @mouseleave=\"hideContext($event, item.id)\" @click.stop>\n                    <ul>\n                        <li>\n                            <a href=\"#\" @mouseenter=\"showContext($event, item.id, true, 'user', 1)\" @mouseleave=\"hideContext($event, item.id, 'user')\"> 유저 관리\n                                <transition name=\"fade\">\n                                    <div class=\"menu_layer user\" v-show=\"item.userContext.user.show\" >\n                                        <ul>\n                                            <li><a href=\"#\" @click=\"makeActiveUserLayer(item.id)\">유저를 유효화</a></li>\n                                            <li><a href=\"#\" @click=\"makeInactiveUserLayer(item.id)\">유저 일시 정지</a></li>\n                                            <li><a href=\"#\" @click=\"changeAdminAuthLayer(item.id)\">관리자권한 <template v-if=\"isAdmin(item.admin_yn)\">삭제</template><template v-else-if=\"!isAdmin(item.admin_yn)\">부여</template></a></li>\n                                            <li><a href=\"#\" @click=\"openLayer('changePasswordLayer', item.id)\">패스워드 변경</a></li>\n                                            <li><a href=\"#\" @click=\"openChangeEmailLayer(item.id)\">메일 주소 변경</a></li>\n                                            <li><a href=\"#\" @click=\"openChangeNameLayer(item.id)\">이름 변경</a></li>\n                                            <li><a href=\"#\" @click=\"openChangeUserPermitLayer(item.id)\">사용자 종류 편집</a></li>\n                                            <li><a href=\"#\" @click=\"deleteUserLayer(item.id)\">유저 삭제</a></li>\n                                        </ul>\n                                    </div>\n                                </transition>\n                            </a>\n                        </li>\n                        <li>\n                            <a href=\"#\" @mouseenter=\"showContext($event, item.id, true,'policy', 2)\" @mouseleave=\"hideContext($event, item.id, 'policy')\"> 정책 관리\n                                <transition name=\"fade\">\n                                    <div class=\"menu_layer policy\" v-show=\"item.userContext.policy.show\">\n                                        <ul>\n                                            <li><a href=\"#\" @click=\"deletePolicyLayer(item.id)\">정책 삭제</a></li>\n                                            <li><a href=\"#\" @click=\"changePolicyLayer(item.id)\">정책 수정</a></li>\n                                        </ul>\n                                    </div>\n                                </transition>\n                            </a>\n                        </li>\n                        <li>\n                            <a href=\"#\" @mouseenter=\"showContext($event, item.id, true,'restrict', 3)\" @mouseleave=\"hideContext($event, item.id, 'restrict')\"> 사용자 제한 설정\n                                <transition name=\"fade\">\n                                    <div class=\"menu_layer restrict\" v-show=\"item.userContext.restrict.show\">\n                                        <ul>\n                                            <li><a href=\"#\" @click=\"restrictLayer('gnrl', item.id)\">일반 스토리지 제한</a></li>\n                                            <li><a href=\"#\" @click=\"restrictLayer('cold', item.id)\">콜드 스토리지 제한</a></li>\n                                            <li><a href=\"#\" @click=\"restrictLayer('ocr', item.id)\">OCR 페이지 수 제한</a></li>\n                                        </ul>\n                                    </div>\n                                </transition>\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n\n      <!-- 페이지 -->\n      <div class=\"page_navi\">\n        <a href=\"#\" class=\"guide prev\" @click=\"getUserList(prevPage, true)\">\n          <img src=\"@/assets/images/component/btn_page_prev.png\" alt=\"Prev\" class=\"ico\">\n        </a>\n        <template v-for=\"page in pageArr\">\n            <a href=\"#\" class=\"num\" :class=\"{active: page.active}\" @click=\"getUserList(page.pageNo, true)\">{{ page.pageNo }}</a>\n        </template>\n        <a href=\"#\" class=\"guide next\" @click=\"getUserList(nextPage, true)\">\n            <img src=\"@/assets/images/component/btn_page_next.png\" alt=\"Next\" class=\"ico\">\n        </a>\n      </div>\n    </template>\n\n    <div class=\"board_empty\" v-else>\n      <img src=\"@/assets/images/component/ico_admin_empty.png\" alt=\"\" class=\"ico\" />\n      <p>유저가 없습니다.</p>\n    </div>\n\n\n\n    <!-- 유저 선택 -->\n    <div class=\"layer_popup\" ref=\"noSelectedUserLayer\">\n        <h3>유저 선택</h3>\n        <div class=\"msg warning\">\n            <h4><img src=\"@/assets/images/component/ico_lp_admin_warning.png\" alt=\"유저 선택\" /></h4>\n            <p>\n                <strong>유저를 선택하세요.</strong>\n            </p>\n        </div>\n\n        <div class=\"btn_set\">\n            <div class=\"center\">\n                <button type=\"button\" class=\"btn_basic submit\" @click=\"closeLayer\">확인</button>\n            </div>\n        </div>\n        <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n    </div>\n\n    <!-- 유저 유효화 - 이미 유효화 -->\n    <div class=\"layer_popup\" ref=\"alreadyActivatedUserLayer\">\n        <h3>유저 유효화</h3>\n        <div class=\"msg warning\">\n            <h4><img src=\"@/assets/images/component/ico_lp_admin_warning.png\" alt=\"유저 유효화\" /></h4>\n            <p>\n                <strong>이미 유효화 되고 있습니다.</strong>\n            </p>\n        </div>\n\n        <div class=\"btn_set\">\n            <div class=\"center\">\n                <button type=\"button\" class=\"btn_basic submit\" @click=\"closeLayer\">확인</button>\n            </div>\n        </div>\n        <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n    </div>\n\n    <!-- 유저 유효화 -->\n    <div class=\"layer_popup\" ref=\"activateUserLayer\">\n        <h3>유저 유효화</h3>\n        <div class=\"msg success\">\n            <h4><img src=\"@/assets/images/component/ico_lp_admin_success.png\" alt=\"유저 유효화\" /></h4>\n            <p>\n                <strong>선택한 항목을 활성화 해도 되겠습니까?</strong>\n            </p>\n        </div>\n\n        <div class=\"btn_set\">\n            <div class=\"right\">\n                <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">취소</button>\n                <button type=\"button\" class=\"btn_basic submit\" @click=\"updateUserActive(layer.selectedId, 1)\">확인</button>\n            </div>\n        </div>\n        <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n    </div>\n\n    <!-- 유저 일시 정지 -->\n    <div class=\"layer_popup\" ref=\"inactivateUserLayer\">\n        <h3>유저 일시 정지</h3>\n        <div class=\"msg warning\">\n            <h4><img src=\"@/assets/images/component/ico_lp_admin_warning.png\" alt=\"유저 일시 정지\" /></h4>\n            <p>\n                <strong>선택한 항목을 일시정지 해도 되겠습니까?</strong>\n            </p>\n        </div>\n\n        <div class=\"btn_set\">\n            <div class=\"right\">\n                <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">취소</button>\n                <button type=\"button\" class=\"btn_basic submit\" @click=\"updateUserActive(layer.selectedId, 2)\">확인</button>\n            </div>\n        </div>\n        <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n    </div>\n\n    <!-- 유저 삭제 -->\n    <div class=\"layer_popup\" ref=\"deleteUserLayer\">\n        <h3>유저 삭제</h3>\n        <div class=\"msg warning\">\n            <h4><img src=\"@/assets/images/component/ico_lp_admin_warning.png\" alt=\"유저 삭제\" /></h4>\n            <p>\n                <strong>유저를 삭제합니다.</strong><br />\n                선택한 단말을 제거하면 그 정보와 파일은 AOSBOX AI plus부터<br />\n                영구적으로 삭제되고 두번 다시 접속할 수 없게 됩니다.<br />\n                계속하시겠습니까?\n            </p>\n        </div>\n\n        <div class=\"btn_set\">\n            <div class=\"right\">\n                <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">취소</button>\n                <button type=\"button\" class=\"btn_basic submit\" @click=\"updateUserActive(layer.selectedId, 3)\">확인</button>\n            </div>\n        </div>\n        <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n    </div>\n\n    <!-- 일반 스토리지 제한 -->\n    <div class=\"layer_popup\" ref=\"restrictGeneralStorageLayer\">\n        <h3>일반 스토리지 제한</h3>\n        <fieldset class=\"range_form\">\n            <legend>일반 스토리지 제한</legend>\n            <p>\n                <span class=\"category\"><label for=\"normalStorageLimit\">일반 스토리지 제한</label></span>\n                <span class=\"field size\">\n                    <input type=\"number\" id=\"normalStorageLimit\" v-model.number=\"layer.value.gnrllimit\" :disabled=\"layer.checked.restrictGeneralStorageLayer\"/> GB\n                    <label class=\"check_option\"><input type=\"checkbox\" v-model:checked=\"layer.checked.restrictGeneralStorageLayer\" @click=\"unlimit('gnrllimit')\"/>무제한</label>\n                </span>\n            </p>\n        </fieldset>\n\n        <div class=\"btn_set\">\n            <div class=\"right\">\n                <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">취소</button>\n                <button type=\"button\" class=\"btn_basic submit\" @click=\"updateUserLimit('gnrllimit')\">확인</button>\n            </div>\n        </div>\n        <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n    </div>\n\n    <!-- 콜드 스토리지 제한 -->\n    <div class=\"layer_popup\" ref=\"restrictColdStorageLayer\">\n        <h3>콜드 스토리지 제한</h3>\n        <fieldset class=\"range_form\">\n            <legend>콜드 스토리지 제한</legend>\n            <p>\n                <span class=\"category\"><label for=\"coldStorageLimit\">콜드 스토리지 제한</label></span>\n                <span class=\"field size\">\n                    <input type=\"number\" id=\"coldStorageLimit\" v-model.number=\"layer.value.coldlimit\" :disabled=\"layer.checked.restrictColdStorageLayer\"/> GB\n                    <label class=\"check_option\"><input type=\"checkbox\" v-model:checked=\"layer.checked.restrictColdStorageLayer\" @click=\"unlimit('coldlimit')\" />무제한</label>\n                </span>\n            </p>\n        </fieldset>\n\n        <div class=\"btn_set\">\n            <div class=\"right\">\n                <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">취소</button>\n                <button type=\"button\" class=\"btn_basic submit\" @click=\"updateUserLimit('coldlimit')\">확인</button>\n            </div>\n        </div>\n        <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n    </div>\n\n    <!-- OCR 페이지 수 제한 -->\n    <div class=\"layer_popup\" ref=\"restrictOcrPageLayer\">\n        <h3>OCR 페이지 수 제한</h3>\n        <fieldset class=\"range_form\">\n            <legend>OCR 페이지 수 제한</legend>\n            <p>\n                <span class=\"category\"><label for=\"ocrPageLimit\">OCR 페이지 수 제한</label></span>\n                <span class=\"field size\">\n                    <input type=\"number\" id=\"ocrPageLimit\" v-model.number=\"layer.value.ocrlimit\" :disabled=\"layer.checked.restrictOcrPageLayer\" /> 페이지\n                    <label class=\"check_option\"><input type=\"checkbox\" v-model:checked=\"layer.checked.restrictOcrPageLayer\" @click=\"unlimit('ocrlimit')\" />무제한</label>\n                </span>\n            </p>\n        </fieldset>\n\n        <div class=\"btn_set\">\n            <div class=\"right\">\n                <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">취소</button>\n                <button type=\"button\" class=\"btn_basic submit\" @click=\"updateUserLimit('ocrlimit')\">확인</button>\n            </div>\n        </div>\n        <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n    </div>\n\n    <!-- 관리자권한 부여 -->\n    <div class=\"layer_popup\" ref=\"giveAdminPrivilegeLayer\">\n        <h3>관리자권한 부여</h3>\n        <div class=\"msg success\">\n            <h4><img src=\"@/assets/images/component/ico_lp_admin_success.png\" alt=\"관리자권한 부여\" /></h4>\n            <p>\n                <strong>이 사용자에게 관리자 권한을 부여하시겠습니까?</strong>\n            </p>\n        </div>\n\n        <div class=\"btn_set\">\n            <div class=\"right\">\n                <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">취소</button>\n                <button type=\"button\" class=\"btn_basic submit\" @click=\"changeAdminAuth\">확인</button>\n            </div>\n        </div>\n        <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n    </div>\n\n    <!-- 관리자권한 삭제 -->\n    <div class=\"layer_popup\" ref=\"removeAdminPrivilegeLayer\">\n        <h3>관리자권한 삭제</h3>\n        <div class=\"msg warning\">\n            <h4><img src=\"@/assets/images/component/ico_lp_admin_warning.png\" alt=\"관리자권한 삭제\" /></h4>\n            <p>\n                <strong>관리자 권한을 삭제해도 되겠습니까?</strong>\n            </p>\n        </div>\n\n        <div class=\"btn_set\">\n            <div class=\"right\">\n                <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">취소</button>\n                <button type=\"button\" class=\"btn_basic submit\" @click=\"changeAdminAuth\">확인</button>\n            </div>\n        </div>\n        <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n    </div>\n\n    <!-- 비밀번호 변경 -->\n    <div class=\"layer_popup\" ref=\"changePasswordLayer\">\n        <h3>비밀번호 변경</h3>\n        <fieldset class=\"write_form\">\n            <legend>비밀번호 변경</legend>\n            <p>\n                <span class=\"category\">\n                    <label for=\"userNewPassword\">새 비밀번호</label>\n                </span>\n                <span class=\"field\">\n                    <input type=\"password\" id=\"userNewPassword\" v-model=\"layer.value.password\" @blur=\"checkError('password')\"/>\n                    <strong class=\"error_msg\" v-show=\"passwordError\">\n                        ※ 비밀번호 형식이 맞지 않습니다.\n                    </strong>\n                </span>\n            </p>\n            <p>\n                <span class=\"category\">\n                    <label for=\"userNewPasswordCheck\">비밀번호 확인</label>\n                </span>\n                <span class=\"field\">\n                    <input type=\"password\" id=\"userNewPasswordCheck\"  v-model=\"layer.value.repassword\" @blur=\"checkError('repassword')\"/>\n                    <strong class=\"error_msg\" v-show=\"repasswordError\">\n                        ※ 비밀번호가 일치하지 않습니다.\n                    </strong>\n                </span>\n            </p>\n        </fieldset>\n\n        <div class=\"btn_set\">\n            <div class=\"right\">\n                <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">취소</button>\n                <button type=\"button\" class=\"btn_basic submit\" @click=\"changeUserPassword\">확인</button>\n            </div>\n        </div>\n        <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n    </div>\n\n    <!-- 메일 주소 변경 -->\n    <div class=\"layer_popup\" ref=\"changeEmailLayer\">\n        <h3>메일 주소 변경</h3>\n        <fieldset class=\"write_form\">\n            <legend>메일 주소 변경</legend>\n            <p>\n                <span class=\"category\">\n                    <label for=\"userMailChange\">메일 주소</label>\n                </span>\n                <span class=\"field\">\n                    <input type=\"email\" id=\"userMailChange\" v-model=\"layer.value.email\" @blur=\"checkNewEmail\"/>\n                    <strong class=\"error_msg\" v-show=\"error.email\">\n                        ※ 유효한 이메일 주소를 입력하세요\n                    </strong>\n                </span>\n            </p>\n        </fieldset>\n\n        <div class=\"btn_set\">\n            <div class=\"right\">\n                <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">취소</button>\n                <button type=\"button\" class=\"btn_basic submit\" @click=\"changeUserEmail\">확인</button>\n            </div>\n        </div>\n        <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n    </div>\n\n    <!-- 이름 변경 -->\n    <div class=\"layer_popup\" ref=\"changeNameLayer\">\n        <h3>이름 변경</h3>\n        <fieldset class=\"write_form\">\n            <legend>이름 변경</legend>\n            <p>\n                <span class=\"category\">\n                    <label for=\"userNameChange\">이름</label>\n                </span>\n                <span class=\"field\">\n                    <input type=\"text\" id=\"userNameChange\" v-model=\"layer.value.name\"/>\n                </span>\n            </p>\n        </fieldset>\n\n        <div class=\"btn_set\">\n            <div class=\"right\">\n                <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">취소</button>\n                <button type=\"button\" class=\"btn_basic submit\" @click=\"changeUserName\">확인</button>\n            </div>\n        </div>\n        <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n    </div>\n\n    <!-- 사용자 종류 편집 -->\n    <div class=\"layer_popup\" ref=\"changeUserPermitLayer\">\n        <h3>사용자 종류 편집</h3>\n        <fieldset class=\"write_form\">\n            <legend>사용자 종류 편집</legend>\n            <p>\n                <span class=\"category\">\n                    <label for=\"searchPermission\">검색 허가</label>\n                </span>\n                <span class=\"field\">\n                    <span class=\"basic_select selectbox_ui\">\n                        <b class=\"selected_txt\"></b>\n                        <select id=\"searchPermission\" v-model=\"layer.value.permit\">\n                            <option value=\"0\">백업 전용</option>\n                            <option value=\"1\">검색 전용</option>\n                            <option value=\"2\">백업과 검색</option>\n                        </select>\n                    </span>\n                </span>\n            </p>\n        </fieldset>\n\n        <div class=\"btn_set\">\n            <div class=\"right\">\n                <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">취소</button>\n                <button type=\"button\" class=\"btn_basic submit\" @click=\"changeUserPermit\">확인</button>\n            </div>\n        </div>\n        <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n    </div>\n\n    <!-- 정책 삭제 -->\n    <div class=\"layer_popup\" ref=\"deletePolicyLayer\">\n        <h3>정책 삭제</h3>\n        <div class=\"msg warning\">\n            <h4><img src=\"@/assets/images/component/ico_lp_admin_warning.png\" alt=\"정책 삭제\" /></h4>\n            <p>\n                <strong>정책을 삭제합니다.</strong><br />\n                정책을 삭제하면 이 정책을 배정 받던 유저는 자신이 백업한 데이터의<br />\n                정책을 다시 선택할 필요가 있습니다. 진행하시겠습니까?\n            </p>\n        </div>\n\n        <div class=\"btn_set\">\n            <div class=\"right\">\n                <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">취소</button>\n                <button type=\"button\" class=\"btn_basic submit\" @click=\"deletePolicy\">확인</button>\n            </div>\n        </div>\n        <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n    </div>\n\n    <!-- 정책 삭제 - 삭제할 정책이 없을 때 -->\n    <div class=\"layer_popup\" ref=\"noPolicyToDeleteLayer\">\n        <h3>정책 삭제</h3>\n        <div class=\"msg warning\">\n            <h4><img src=\"@/assets/images/component/ico_lp_admin_warning.png\" alt=\"정책 삭제\" /></h4>\n            <p><strong>삭제할 정책이 없습니다.</strong></p>\n        </div>\n\n        <div class=\"btn_set\">\n            <div class=\"center\">\n                <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">확인</button>\n            </div>\n        </div>\n        <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n    </div>\n\n    <!-- 정책 수정 -->\n    <div class=\"layer_popup\" ref=\"changePolicyLayer\">\n        <h3>정책 수정</h3>\n        <fieldset class=\"write_form\">\n            <legend>정책 수정</legend>\n            <p>\n                <span class=\"category\">\n                    <label for=\"modifyPolicy\">할당 정책을 선택합니다.</label>\n                </span>\n                <span class=\"field\">\n                    <span class=\"basic_select selectbox_ui\">\n                        <b class=\"selected_txt\"></b>\n                        <select id=\"modifyPolicy\" v-model=\"layer.value.policyId\">\n                            <option value=\"0\">사용자 정의</option>\n                            <option v-for=\"policy in layer.value.policyList\" :value=\"policy.bp_id\" selected>{{policy.bp_name}}</option>\n                        </select>\n                    </span>\n                </span>\n            </p>\n        </fieldset>\n\n        <div class=\"btn_set\">\n            <div class=\"right\">\n                <button type=\"button\" class=\"btn_basic cancel\" @click=\"closeLayer\">취소</button>\n                <button type=\"button\" class=\"btn_basic submit\" @click=\"changePolicy\">확인</button>\n            </div>\n        </div>\n        <button class=\"btn_close\" @click=\"closeLayer\"><img src=\"@/assets/images/component/btn_popup_close.png\" alt=\"닫기\" /></button>\n    </div>\n\n    <!-- 모달 배경 -->\n    <div class=\"modal_bg\" ref=\"modal\"></div>\n  </div>\n\n\n</template>\n\n<script>\nimport * as management from '../../../store/management/vuex_management'\nimport {commonMethodsMixin} from '../../../common/commonMethodsMixin'\nimport {listAndPageMixin} from '../../../common/listAndPageMixin'\n\nexport default {\n    name: \"User\",\n    mixins: [commonMethodsMixin, listAndPageMixin],\n    props: ['userType'],\n    data() {\n        return {\n            context: {\n              userAdd : false,\n              detail: false\n            },\n            layer: {\n                checked: {\n                    restrictGeneralStorageLayer: false, // 일반 스토리지 제한\n                    restrictColdStorageLayer: false,    // 콜드 스토리지 제한\n                    restrictOcrPageLayer: false,        // OCR 페이지 수 제한\n                    sendToCsvLayer: false,              // CSV에 내보내기\n                    giveAdminPrivilegeLayer: false,     // 관리자권한 부여\n                    removeAdminPrivilegeLayer: false,   // 관리자권한 삭제\n                    changePasswordLayer: false,         // 비밀번호 변경\n                    changeEmailLayer: false,            // 메일주소 변경\n                    changeNameLayer: false,             // 이름 변경\n                    changeUserPermitLayer: false,       // 사용자 종류 편집\n                    deletePolicyLayer: false,           // 정책 삭제\n                    noPolicyToDeleteLayer: false,       // 삭제할 정책이 없습니다.\n                    changePolicyLayer: false,           // 정책 수정\n                },\n                value: {\n                    gnrllimit: 0,\n                    coldlimit: 0,\n                    ocrlimit: 0,\n                    password: '',\n                    repassword : '',\n                    name: '',\n                    email: '',\n                    permit: 0,\n                    policyList: [],\n                    policyId: 0\n                },\n                selectedId: 'selected'              // 선택된 id\n            },\n            error: {\n                password: false,\n                repassword: false,\n                email: false\n            }\n      }\n    },\n    computed: {\n        passwordError() {\n\n            return this.error.password;\n        },\n        repasswordError() {\n\n            return this.error.repassword;\n        },\n    },\n    methods: {\n\n        setPolicyName(policyname) {\n\n            return policyname ? policyname : '사용자 정의';\n        },\n\n        isAdmin(admin_yn) {\n\n            return admin_yn === 'Y';\n        },\n\n        showContext(event, id, adjustYn, subName, subCount) {\n\n            let list = this.list,\n                $target,\n                $context,\n                top,\n                left;\n\n            event.stopPropagation();\n\n            if (subName) {\n\n                $target = $(event.target).closest(\".menu_layer\");\n                $context = $target.find(\".menu_layer.\" + subName);\n\n            } else {\n\n                $target = $(event.target)[0].nodeName === 'I' ? $(event.target).closest('button') : $(event.target);\n                $context = $target.closest('td').find('.menu_layer.user_context');\n            }\n\n            for (let i = 0; i < list.length; i++) {\n\n                if (list[i].id == id) {\n\n                    if (subName)\n                        list[i].userContext[subName].show = true;\n                    else\n                        list[i].userContext.show = true;\n                }\n            }\n\n            if (adjustYn) {\n\n                if (subName) {\n\n                    let subContextCount = $target.find('.menu_layer').length;\n                    top = $target.offset().top + ($target.outerHeight() / subContextCount) * (subCount - 1) - (1.5 * subCount);\n\n                } else {\n\n                    top = $target.offset().top;\n                }\n\n                left = $target.offset().left + 2 - $context.outerWidth();\n                $context.css(\"top\", top + \"px\").css(\"left\", left + \"px\");\n            }\n        },\n\n        hideContext(event, id, subName) {\n\n            event.stopPropagation();\n\n            let list = this.list;\n\n            for (let i = 0; i < list.length; i++) {\n\n                if (list[i].id == id) {\n\n                    if (subName === undefined)\n                        list[i].userContext.show = false;\n                    else\n                        list[i].userContext[subName].show = false;\n                }\n            }\n\n        },\n        getUserList(pageNo, saveCookie) {\n\n            const self = this;\n\n            this.$nextTick(function() {\n\n                if (pageNo !== undefined)\n                    self.pageInfo.currentPage = pageNo;\n\n                self.setPageLoadInfo();\n\n                if (saveCookie)\n                    self.$cookies.set(self.$route.path, {currentPage: self.pageInfo.currentPage, searchText: self.pageInfo.searchText});\n\n                axios.post(\"/management/user_server/list/User/\", {\n                    userType: self.userType,\n                    searchText: self.pageInfo.searchText,\n                    currentPage: self.pageInfo.currentPage,\n                    dataPerPage: self.pageInfo.dataPerPage,\n                    orderName : self.pageInfo.orderName,\n                    orderType : self.pageInfo.orderType\n                }).then(response => {\n\n                    if (response.status == 200) {\n\n                        let boxUsers = response.data.list,\n                            totalBoxUsers = response.data.totalListCount,\n                            haveNew = response.data.haveNew;\n\n                        self.pageInfo.totalData = totalBoxUsers;\n                        // this.$store.dispatch('management/setUserPagenation', {totalData: totalBoxUsers});\n\n                        self.$emit('setHaveNew', 'User', haveNew);\n\n                        let list = [];\n\n                        for (let i = 0; i < boxUsers.length; i++) {\n\n                            let data = boxUsers[i];\n                            let obj = {};\n\n                            for (let prop in data) {\n\n                                let newPropName = prop.replace('bu_', '');\n\n                                obj[newPropName] = data[prop];\n\n                                switch(prop) {\n                                    case 'bu_gnrlsto':\n                                    case 'bu_coldsto':\n                                    case 'bu_ocr':\n                                        if (data[prop] == null)\n                                            obj[newPropName] = 0;\n                                        break;\n\n                                    case 'bu_gnrllimit':\n                                    case 'bu_coldlimit':\n                                    case 'bu_ocrlimit':\n                                        if (data[prop] == 0)\n                                            obj[newPropName] = '';\n                                        break;\n\n                                    default:\n                                        // do nothing\n                                }\n                            }\n\n                            obj.id = boxUsers[i].bu_id;\n                            obj.checked = false;\n                            obj.userContext = {\n                                show: false,\n                                user: {show: false},\n                                policy: {show: false},\n                                restrict: {show: false}\n                            };\n\n                            list.push(obj);\n                        }\n\n                        self.list = list;\n                        // this.$store.dispatch('management/setUserList', list);\n                    }\n                }).catch(ex => {\n\n                    console.log(ex);\n                });\n            });\n\n        },\n\n        // 상세 페이지 이동\n        goUserInfo(userId) {\n\n            this.$router.push({ name: 'user_info', params: { userId: userId }});\n        },\n\n        // 선택된 유저 정보\n        getSelectedUser() {\n\n            let selectedUserids = [],\n                list = this.list,\n                user,\n                i;\n\n            for (i = 0; i < list.length; i++) {\n\n                user = list[i];\n\n                if (user.checked)\n                    selectedUserids.push(user.id);\n            }\n\n            return selectedUserids;\n        },\n\n        checkSelectedUser(userids) {\n\n            if (userids.length == 0) {\n\n                this.openLayer('noSelectedUserLayer');\n                return false;\n            }\n\n            return true;\n        },\n\n        // 유효화, 일시정지, 삭제\n        updateUserActive(userids, active) {\n            let self = this;\n\n            axios.post('/management/updateUserActive/', {userids: userids, active: active}).then(response => {\n\n                let data = response.data,\n                    message = '';\n\n                // if (active == 1)\n                //     message = '활성화되었습니다.';\n                // else if (active == 2)\n                //     message = '일시정지되었습니다.';\n                // else\n                //     message = '삭제되었습니다.';\n\n                if (data.code == 1000) {\n\n                    self.closeLayer();\n                    self.getUserList();\n                    // alert(message);\n                }\n\n            }).catch(ex => {\n\n                console.log(ex);\n            });\n        },\n\n        // 유저를 유효화 버튼 클릭 시, 레이어 팝업\n        makeActiveUserLayer(userid) {\n\n            let userids = [userid],\n                list = this.list,\n                alreadyActive = false;\n\n            if (userid instanceof Event)\n                userids = this.getSelectedUser();\n\n            // 유저 선택여부 검사\n            if (!this.checkSelectedUser(userids)) return;\n\n            // 이미 유효화 검사\n            for (let i = 0; i < list.length; i++) {\n\n                for(let j = 0; j < userids.length; j++) {\n\n                    if (list[i].id === userids[j] && list[i].status === 1) {\n                        alreadyActive = true;\n                    }\n                }\n            }\n\n            if (alreadyActive) {\n\n                this.openLayer('alreadyActivatedUserLayer');\n                return;\n            }\n\n            this.openLayer('activateUserLayer');\n            this.layer.selectedId = userids;\n        },\n\n        // 유저 일시정지 버튼 클릭 시, 레이어 팝업\n        makeInactiveUserLayer(userid) {\n\n            let userids = [userid],\n                list = this.list,\n                alreadyActive = false;\n\n            if (userid instanceof Event)\n                userids = this.getSelectedUser();\n\n            // 유저 선택여부 검사\n            if (!this.checkSelectedUser(userids)) return;\n\n            this.openLayer('inactivateUserLayer');\n            this.layer.selectedId = userids;\n        },\n\n        // 유저 삭제 버튼 클릭 시, 레이어 팝업\n        deleteUserLayer(userid) {\n\n            let userids = [userid],\n                list = this.list,\n                alreadyActive = false;\n\n            if (userid instanceof Event)\n                userids = this.getSelectedUser();\n\n            // 유저 선택여부 검사\n            if (!this.checkSelectedUser(userids)) return;\n\n            this.openLayer('deleteUserLayer');\n            this.layer.selectedId = userids;\n        },\n\n        // 일반 스토리지 제한, 콜드 스토리지 제한, ORC 페이지 제한 버튼 클릭 시, 레이어 팝업\n        restrictLayer(layerType, userid) {\n\n            let userids = [userid],\n                layerName = '',\n                limitName = '',\n                size = '',\n                check = false;\n\n            switch(layerType) {\n                case 'gnrl':\n                    layerName = 'restrictGeneralStorageLayer';\n                    limitName = 'gnrllimit';\n                    break;\n\n                case 'cold':\n                    layerName = 'restrictColdStorageLayer';\n                    limitName = 'coldlimit';\n                    break;\n\n                case 'ocr':\n                    layerName = 'restrictOcrPageLayer';\n                    limitName = 'ocrlimit';\n                    break;\n            }\n\n            $(this.$refs[layerName]).find(\"input\").css(\"border-color\", \"#CCCCCC\");\n\n            if (userid === undefined) {\n\n                userids = this.getSelectedUser();\n\n            } else {\n\n                for (let i = 0; i < this.list.length; i++) {\n\n                    if (this.list[i].id == userid) {\n\n                        size = this.list[i][limitName];\n                        check = size === '' ? true : false;\n                    }\n                }\n            }\n\n            this.layer.value[limitName] = size;\n            this.layer.checked[layerName] = check;\n\n            // 유저 선택여부 검사\n            if (!this.checkSelectedUser(userids)) return;\n\n            this.openLayer(layerName);\n            this.layer.selectedId = userids;\n        },\n\n        updateUserLimit(type) {\n\n            let self = this,\n                size = this.layer.value[type],\n                userids = this.layer.selectedId,\n                $targetInput,\n                layerName,\n                unlimitChecked; // 무제한 체크 여부\n\n            if (type == 'gnrllimit')\n                layerName = 'restrictGeneralStorageLayer';\n            else if (type == 'coldlimit')\n                layerName = 'restrictColdStorageLayer';\n            else if (type == 'ocrlimit')\n                layerName = 'restrictOcrPageLayer';\n\n            $targetInput = $(this.$refs[layerName]).find('input');;\n            unlimitChecked = this.layer.checked[layerName];\n\n            if ((size !== '' && size <= 0) || (size === '' && !unlimitChecked)) {\n\n                $targetInput.css(\"border-color\", \"red\");\n                return false;\n            }\n\n            axios.post('/management/updateUserLimit/', {userids: userids, type: type, size: size}).then(response => {\n\n                let data = response.data;\n\n                if (data.code == 1000) {\n\n                    self.closeLayer();\n                    self.getUserList();\n                }\n\n            }).catch(ex => {\n\n                console.log(ex);\n            });\n        },\n\n        // 레이어 팝업 보이기\n        openLayer(layerName, userId) {\n\n            $(this.$refs.modal).show();\n            $(this.$refs[layerName]).show();\n\n            if (userId)\n                this.layer.selectedId = userId;\n        },\n\n        // 레이어 팝업 숨기기\n        closeLayer() {\n\n            $(this.$refs.modal).hide();\n            $(\".layer_popup\").hide();\n        },\n\n        unlimit(valueName) {\n\n           this.layer.value[valueName] = '';\n        },\n\n        changeAdminAuthLayer(userId) {\n\n            let adminYn;\n\n            for (let i = 0; i < this.list.length; i++) {\n\n                if (userId == this.list[i].id)\n                    adminYn = this.list[i].admin_yn;\n            }\n\n            this.layer.selectedId = userId;\n\n            if (adminYn === 'Y') {\n\n                this.openLayer('removeAdminPrivilegeLayer');\n\n            } else {\n\n                this.openLayer('giveAdminPrivilegeLayer');\n            }\n        },\n\n        // 관리자 권한 부여 / 삭제\n        changeAdminAuth() {\n\n            let self = this,\n                userId = this.layer.selectedId;\n\n            axios.post('/management/changeAdminAuth/', {userId: userId}).then(response => {\n\n                let data = response.data,\n                    ci = data.ci,\n                    message = '';\n\n                if (data.code == 1000) {\n\n                    // if (ci === 1) {\n                    //\n                    //     message = '관리자로 변경되었습니다.';\n                    //\n                    // } else if (ci === 2) {\n                    //\n                    //     message = '관리자 권한이 해제되었습니다.';\n                    // }\n\n                    self.closeLayer();\n                    self.getUserList();\n                    // alert(message);\n                }\n\n            }).catch(ex => {\n\n                console.log(ex);\n            });\n        },\n\n        changeUserPassword() {\n\n            this.checkPassword();\n            this.checkRepassword();\n\n            let error = this.error.password || this.error.repassword;\n\n            if (!error)\n                this.changeUserInfo('password');\n        },\n\n        openChangeEmailLayer(userId) {\n\n            for (let i = 0; i < this.list.length; i++) {\n\n                if (userId === this.list[i].id)\n                    this.layer.value.email = this.list[i].email;\n            }\n\n            this.openLayer('changeEmailLayer', userId);\n        },\n\n        checkNewEmail() {\n\n            let email = this.layer.value.email;\n\n            if (checkValidEmail(email)) {\n\n                this.error.email = false;\n\n            } else {\n\n                this.error.email = true;\n            }\n        },\n\n        changeUserEmail() {\n\n            this.checkNewEmail();\n\n            if (!this.error.email)\n                this.changeUserInfo('email');\n        },\n\n        openChangeNameLayer(userId) {\n\n            for (let i = 0; i < this.list.length; i++) {\n\n                if (userId === this.list[i].id) {\n\n                    this.layer.value.name = this.list[i].firstname;\n\n                    if (this.list[i].lastname)\n                        this.layer.value.name += ' ' + this.list[i].lastname;\n                }\n            }\n\n            this.openLayer('changeNameLayer', userId);\n        },\n\n        changeUserName() {\n\n            if (this.layer.value.name.trim())\n                this.changeUserInfo('name');\n        },\n\n        openChangeUserPermitLayer(userId) {\n\n            for (let i = 0; i < this.list.length; i++) {\n\n                if (userId === this.list[i].id)\n                    this.layer.value.permit = this.list[i].permit;\n            }\n\n            this.openLayer('changeUserPermitLayer', userId);\n\n            setTimeout( function () {\n                initSelectBox($('#searchPermission').parent(\".selectbox_ui\"));\n            }, 100);\n        },\n\n        changeUserPermit() {\n\n            this.changeUserInfo('permit');\n        },\n\n        changeUserInfo(type) {\n\n            let self = this,\n                userId = this.layer.selectedId,\n                value = this.layer.value[type],\n                message = '';\n\n            switch (type) {\n\n                case 'password':\n                    message = '패스워드';\n                    break;\n\n                case 'name':\n                    message = '이름';\n                    break;\n\n                case 'email':\n                    message = '메일 주소';\n                    break;\n\n                case 'permit':\n                    message = '사용자 종류';\n                    break;\n\n                case 'policyId':\n                    message = '정책';\n                    break;\n            }\n\n            axios.post('/management/changeUserInfo/', {userId: userId, type: type, value: value}).then(response => {\n\n                let data = response.data;\n\n                if (data.code == 1000) {\n\n                    self.closeLayer();\n                    self.getUserList();\n\n                } else {\n\n                    message += ' 변경에 실패했습니다.';\n                    alert(message);\n                }\n\n            }).catch(ex => {\n\n                console.log(ex);\n            });\n        },\n\n        checkError(type) {\n\n            if (type === 'password') {\n\n                this.checkPassword();\n                this.checkRepassword();\n\n            } else if (type === 'repassword') {\n\n                this.checkRepassword();\n            }\n        },\n\n        checkPassword() {\n\n            let password = this.layer.value.password;\n\n            if (password.length != 0 && password.length < 6) {\n\n                this.error.password = true;\n\n            } else {\n\n                this.error.password = false;\n            }\n        },\n\n        checkRepassword() {\n\n            let password = this.layer.value.password,\n                repassword = this.layer.value.repassword;\n\n            if (password.length != 0 && repassword.length != 0 && password != repassword) {\n\n                this.error.repassword = true;\n\n            } else {\n\n                this.error.repassword = false;\n            }\n        },\n\n        deletePolicyLayer(userId) {\n\n            let policyId;\n\n            for (let i = 0; i < this.list.length; i++) {\n\n                if (userId === this.list[i].id)\n                    policyId = this.list[i].policy\n            }\n\n            if (policyId)\n                this.openLayer('deletePolicyLayer', userId);\n            else\n                this.openLayer('noPolicyToDeleteLayer');\n        },\n\n        deletePolicy() {\n\n            this.layer.value.policyId = 0;\n            this.changeUserInfo('policyId');\n        },\n\n        changePolicyLayer(userId) {\n\n            let self = this,\n                policyId;\n\n            for (let i = 0; i < this.list.length; i++) {\n\n                if (userId === this.list[i].id)\n                    policyId = this.list[i].policy ? this.list[i].policy : 0;\n            }\n\n            axios.post(\"/management/getPolicyList/\", {userId: userId}).then(response => {\n\n                let data = response.data;\n\n                if (data.code === 1000) {\n\n                    self.layer.value.policyList = data.policyList;\n\n                    self.layer.value.policyId = policyId;\n\n                    setTimeout( function () {\n                        initSelectBox($('#modifyPolicy').parent(\".selectbox_ui\"));\n                    }, 100);\n\n                    self.openLayer('changePolicyLayer', userId);\n                }\n\n            }).catch(ex => {\n\n                console.log(ex);\n            });\n        },\n\n        changePolicy() {\n\n            this.changeUserInfo('policyId');\n        },\n\n        setPageLoadInfo() {\n\n            let payload = {\n                currentPage: this.pageInfo.currentPage,\n                searchText: this.pageInfo.searchText,\n            };\n\n            this.$store.dispatch('main/setPageLoadInfo', payload);\n        },\n\n        downloadCSV() {\n\n            axios.post(\"/management/downloadCSV/list/User/\", {\n                userType: this.userType,\n                searchText: this.pageInfo.searchText,\n                currentPage: this.pageInfo.currentPage,\n                dataPerPage: this.pageInfo.dataPerPage,\n                orderName : this.pageInfo.orderName,\n                orderType : this.pageInfo.orderType\n            }).then(response => {\n\n                if(response.data.size < 1){\n                    alert(\"Can not download\");\n                    return;\n                }\n\n                let blob = new Blob([\"\\ufeff\" + response.data], {type: response.headers['content-type']});\n                let link = document.createElement('a');\n                link.href = window.URL.createObjectURL(blob);\n                link.download = 'userList.csv';\n                link.click();\n\n            }).catch(ex => {\n\n                console.log(ex);\n            });\n        },\n\n        // 목록 정렬\n        sortList(event) {\n\n            let $target = $(event.target),\n                $sortings = $(\"a.sorting\");\n\n            // 나머지 비활성화\n            $sortings.each(function () {\n\n                if ($(this)[0] != $target[0]) {\n\n                    $(this).addClass('inactive').removeClass('on');\n                }\n            });\n\n            if ($target.hasClass('inactive')) {\n\n                // 해당 항목 활성화\n                $target.removeClass('inactive');\n                $target.addClass('on');\n\n            } else {\n\n                if ($target.hasClass('on')) {\n\n                    $target.removeClass('on');\n\n                } else {\n\n                    $target.addClass('inactive');\n                }\n            }\n\n            this.setSort();\n            this.getUserList();\n        },\n\n        setSort() {\n\n            let orderName = '',\n                orderType = '';\n\n            $(\"a.sorting\").each(function () {\n\n                if ($(this).hasClass(\"inactive\")) {\n\n                    // do nothing\n\n                } else {\n\n                    orderName = $(this).data(\"sort\");\n                    orderType = $(this).hasClass('on') ? 'asc' : 'desc';\n                }\n            });\n\n            this.pageInfo.orderName = orderName;\n            this.pageInfo.orderType = orderType;\n        }\n   },\n    created() {\n\n        let pageLoadInfo = this.$store.state.main.pageLoadInfo,\n            keys = Object.keys(pageLoadInfo);\n\n        for( let i = 0; i < keys.length; i++) {\n\n            this.pageInfo[keys[i]] = pageLoadInfo[keys[i]];\n        }\n\n        if (Object.keys(this.$route.query).length !== 0)\n            this.pageInfo = Object.assign(this.pageInfo, this.$cookies.get(this.$route.path));\n\n        this.getUserList();\n    }\n}\n</script>\n\n<style scoped>\n.fade-enter-active, .fade-leave-active {\n    transition: opacity 0.5s;\n}\n\n.fade-enter, .fade-leave-active {\n    opacity: 0;\n}\n\n.menu_layer {\n  display: block;\n}\n\n#menu_layer_detail {\n    right: 10px;\n}\n.menu_layer.user_context, .menu_layer.user, .menu_layer.policy, .menu_layer.restrict{\n    position: fixed;\n}\n\n  /*.user_context {*/\n  /*  right: 47px;*/\n  /*}*/\n  .user_context_user_management {\n    top: -1px;\n    left: -132px;\n  }\n  .user_context_policy_management {\n    top: 30px;\n    left: -89px;\n  }\n  .user_context_user_limit {\n    top: 62px;\n    left: -149px;\n  }\n  .layer_popup>h3 {\n    position: relative !important;\n    z-index: 2;\n    color: #136BB5;\n    font-size: 20px !important;\n    font-weight: normal;\n    line-height: 120%;\n    padding: 2px 0px 0px 14px;\n    margin-bottom: 45px !important;\n}\n.top_menu_layer {\n    top: 33px;\n}\n</style>\n"]}]}