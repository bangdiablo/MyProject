{"remainingRequest":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/src/views/before_login/Authen.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/src/views/before_login/Authen.vue","mtime":1583887584468},{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jaehyukbang/db_project_2019/SITE/SiteFront/user-site-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgYmVmb3JlX2xvZ2luX2hlYWRlciBmcm9tICcuLi8uLi9jb21wb25lbnRzL2hlYWRlci9iZWZvcmVfbG9naW5faGVhZGVyJwppbXBvcnQgYmVmb3JlX2xvZ2luX2Zvb3RlciBmcm9tICcuLi8uLi9jb21wb25lbnRzL2Zvb3Rlci9iZWZvcmVfbG9naW5fZm9vdGVyJwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ2F1dGhlbicsCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGxhbmd1YWdlOiAnS08nLAogICAgICAgICAgICB1c2VySWQgOiAnJywKICAgICAgICAgICAgdXNlck5hbWU6ICcnLAogICAgICAgICAgICB2ZXJpZmljYXRpb25Db2RlOiAnJywKICAgICAgICAgICAgZXJyb3I6IGZhbHNlLAogICAgICAgICAgICBlcnJvck1lc3NhZ2U6ICcnCiAgICAgICAgfQogICAgfSwKICAgIGNvbXB1dGVkOiB7CgogICAgfSwKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICAnYmVmb3JlLWxvZ2luLWhlYWRlcic6IGJlZm9yZV9sb2dpbl9oZWFkZXIsCiAgICAgICAgJ2JlZm9yZS1sb2dpbi1mb290ZXInOiBiZWZvcmVfbG9naW5fZm9vdGVyLAogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBzdWJtaXQoKSB7CgogICAgICAgICAgICBsZXQgdXNlcklkID0gdGhpcy51c2VySWQsCiAgICAgICAgICAgICAgICB2ZXJpZmljYXRpb25Db2RlID0gdGhpcy52ZXJpZmljYXRpb25Db2RlOwoKICAgICAgICAgICAgaWYgKHZlcmlmaWNhdGlvbkNvZGUudHJpbSgpID09PSAnJykgewoKICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IgPSB0cnVlOwogICAgICAgICAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSAn7J247KadIOy9lOuTnOulvCDsnoXroKXtlZjshLjsmpQuJzsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYXhpb3MucG9zdCgnL2JlZm9yZV9sb2dpbi9zZWNvbmRDZXJ0aWZpY2F0aW9uLycsewogICAgICAgICAgICAgICAgdXNlcklkOiB1c2VySWQsCiAgICAgICAgICAgICAgICB2ZXJpZmljYXRpb25Db2RlOiB2ZXJpZmljYXRpb25Db2RlLAogICAgICAgICAgICAgICAgbGFuZ3VhZ2U6IHRoaXMubGFuZ3VhZ2UKICAgICAgICAgICAgfSkudGhlbihyZXNwb25zZSA9PiB7CgogICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcykKICAgICAgICAgICAgICAgIGxldCBkYXRhID0gcmVzcG9uc2UuZGF0YTsKCiAgICAgICAgICAgICAgICBpZiAoZGF0YS5jb2RlID09IDEwMDApIHsKCiAgICAgICAgICAgICAgICAgICAgbGV0IHN0b3JhZ2Vfc2VydmljZSA9IGRhdGEuc3RvcmFnZV9zZXJ2aWNlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdtYWluL3NldEFkbWluJywgZGF0YS5pc0FkbWluKTsgICAgLy8g6rSA66as7J6QIOyXrOu2gCDshKTsoJUKICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3N0b3JhZ2Vfc2VydmljZS9zZXRfc3RvcmFnZV9zZXJ2aWNlX2dvb2dsZV9kcml2ZV90b190cnVlJywgc3RvcmFnZV9zZXJ2aWNlKQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvJyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g66mU7J247ZmU66m0IOydtOuPmQoKICAgICAgICAgICAgICAgIH0gZWxzZSB7CgogICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gJ+yduOymnSDsvZTrk5zqsIAg7Jis67CU66W07KeAIOyViuyKteuLiOuLpC4nOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0pLmNhdGNoKGV4ID0+IHsKCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhleCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVkKCkgewoKICAgICAgICB0aGlzLnVzZXJJZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy51c2VySWQ7CiAgICAgICAgdGhpcy51c2VyTmFtZSA9IHRoaXMuJHJvdXRlLnBhcmFtcy51c2VyTmFtZTsKCiAgICAgICAgaWYgKHRoaXMudXNlcklkID09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBhbGVydCgi7J6Y66q765CcIOygkeq3vOyeheuLiOuLpC4iKTsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9iZWZvcmVfbG9naW4vbG9naW4nKTsKICAgICAgICB9CiAgICB9Cn0KCg=="},{"version":3,"sources":["Authen.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Authen.vue","sourceRoot":"src/views/before_login","sourcesContent":["<!--    메인 표시되는 화면은 폴더명 == 파일명으로 사용바랍니다.            -->\n<template>\n    <div id=\"member_container\">\n        <section id=\"member_info\">\n            <before-login-header/>\n            <div class=\"member_form\">\n                <h2>2단계 인증</h2>\n                <div class=\"visual\">\n                    <img src=\"@/assets/images/member/visual_authen.png\" alt=\"\" />\n                </div>\n                <p class=\"ask_msg\">\n                    <strong>{{userName}}님</strong><br>\n                    계정에 로그인하려면<br>\n                    2단계 인증 코드를 입력하십시오.\n                </p>\n                <fieldset>\n                    <legend>인증 정보 입력</legend>\n                    <p class=\"field\"><label for=\"findEmail\">2단계 인증 코드 :</label><input type=\"text\" placeholder=\"2단계 인증 코드\" v-model=\"verificationCode\" id=\"findEmail\" /></p>\n                    <p class=\"error_msg\" v-show=\"error\">{{errorMessage}}</p>\n                    <p class=\"btn_set\"><button type=\"button\" @click=\"submit\">제출</button></p>\n                    <p class=\"find_password\">권한 부여 코드를 입력하는 데 문제가 있습니까?<br /><a href=\"#\">백업 코드 입력</a></p>\n                </fieldset>\n            </div>\n            <before-login-footer/>\n        </section>\n    </div>\n</template>\n\n<script>\n\n    import before_login_header from '../../components/header/before_login_header'\n    import before_login_footer from '../../components/footer/before_login_footer'\n\n    export default {\n        name: 'authen',\n        data() {\n            return {\n                language: 'KO',\n                userId : '',\n                userName: '',\n                verificationCode: '',\n                error: false,\n                errorMessage: ''\n            }\n        },\n        computed: {\n\n        },\n        components: {\n            'before-login-header': before_login_header,\n            'before-login-footer': before_login_footer,\n        },\n        methods: {\n            submit() {\n\n                let userId = this.userId,\n                    verificationCode = this.verificationCode;\n\n                if (verificationCode.trim() === '') {\n\n                    this.error = true;\n                    this.errorMessage = '인증 코드를 입력하세요.';\n                    return;\n                }\n\n                axios.post('/before_login/secondCertification/',{\n                    userId: userId,\n                    verificationCode: verificationCode,\n                    language: this.language\n                }).then(response => {\n\n                    console.log(this)\n                    let data = response.data;\n\n                    if (data.code == 1000) {\n\n                        let storage_service = data.storage_service;\n                        this.$store.dispatch('main/setAdmin', data.isAdmin);    // 관리자 여부 설정\n                        this.$store.commit('storage_service/set_storage_service_google_drive_to_true', storage_service)\n                        this.$router.push('/');                                 // 메인화면 이동\n\n                    } else {\n\n                        this.error = true;\n                        this.errorMessage = '인증 코드가 올바르지 않습니다.';\n                        return;\n                    }\n\n                }).catch(ex => {\n\n                    console.log(ex);\n                });\n            }\n        },\n        created() {\n\n            this.userId = this.$route.params.userId;\n            this.userName = this.$route.params.userName;\n\n            if (this.userId == undefined) {\n                alert(\"잘못된 접근입니다.\");\n                this.$router.push('/before_login/login');\n            }\n        }\n    }\n\n</script>\n\n<style>\n</style>\n"]}]}